(self.webpackChunkweb=self.webpackChunkweb||[]).push([[358],{9629:(e,r,t)=>{t.d(r,{e:()=>p});t(6665);var o=t(3929),n=t(3668),s=t(6283),i=t(5708),a=t(558),l=t(2167),c=t(4667),d=t(2348),u=t(397);function m(){const e=(0,l.cq)(),{width:r}=(0,a.A)(),{colors:t}=(0,c.D)(),n=r<768;return(0,u.jsx)(o.A,{style:[h.container,n&&h.containerMobile,{backgroundColor:t.background.primary,borderTopColor:t.border}],children:(0,u.jsx)(o.A,{style:[h.content,n&&h.contentMobile],children:(0,u.jsx)(o.A,{style:[h.linksContainer,n&&h.linksContainerMobile],children:(0,u.jsxs)(o.A,{style:[h.linkGroup,n&&h.linkGroupMobile],children:[(0,u.jsx)(i.A,{onPress:()=>e.navigate("Terms"),children:(0,u.jsx)(s.A,{style:[h.link,{color:t.text.secondary}],children:"Terms of Service"})}),(0,u.jsx)(s.A,{style:[h.separator,{color:t.text.tertiary}],children:"\u2022"}),(0,u.jsx)(i.A,{onPress:()=>e.navigate("Privacy"),children:(0,u.jsx)(s.A,{style:[h.link,{color:t.text.secondary}],children:"Privacy Policy"})}),(0,u.jsx)(s.A,{style:[h.separator,{color:t.text.tertiary}],children:"\u2022"}),(0,u.jsx)(i.A,{onPress:()=>e.navigate("Contact"),children:(0,u.jsx)(s.A,{style:[h.link,{color:t.text.secondary}],children:"Contact Us"})})]})})})})}const h=n.A.create({container:{width:"100%",padding:d.Y.LARGE},containerMobile:{padding:0},content:{padding:0,borderTopWidth:1,maxWidth:1200,marginHorizontal:"auto"},contentMobile:{flexDirection:"column",gap:8},linksContainer:{width:"100%",flexDirection:"row",justifyContent:"center",alignItems:"center"},linksContainerMobile:{flexDirection:"column",gap:d.Y.SMALL},linkGroup:{flexDirection:"row",alignItems:"center",gap:d.Y.LARGE},linkGroupMobile:{gap:8},link:{fontSize:14},separator:{fontSize:14}}),p=({children:e,showFooter:r=!0})=>{const{colors:t}=(0,c.D)();return(0,u.jsxs)(o.A,{style:[y.container,{backgroundColor:t.background.primary}],children:[(0,u.jsx)(o.A,{style:y.content,children:e}),r&&(0,u.jsx)(m,{})]})},y=n.A.create({container:{flex:1,display:"flex",flexDirection:"column"},content:{flex:1,width:"100%"}})},415:(e,r,t)=>{t.d(r,{I:()=>g});var o=t(6665),n=t(3929),s=t(3668),i=t(1690),a=t(5991),l=t(2933),c=t(8481),d=t(4667),u=t(6680),m=t(2167),h=t(9058),p=t(2419),y=t(397);const g=({foils:e,allFoils:r,columns:t,searchQuery:s,onSearch:g,onUpdateFoils:x,renderHeader:b,renderControls:A,onColumnVisibilityChange:w,onResetColumns:v,filterOptions:j,selectedFilters:S,onFilterChange:C,onClearFilters:k})=>{const{colors:I}=(0,d.D)(),[O,T]=(0,o.useState)(!1),[D,R]=(0,o.useState)(""),F=(0,m.lq)(),B="Comparison"===F.name,N="Quiver"===F.name,P=o.useMemo((()=>B||N?{brands:Array.from(new Set(e.map((e=>e.brand)))),series:Array.from(new Set(e.map((e=>e.series)).filter((e=>!!e)))),types:Array.from(new Set(e.map((e=>e.type)).filter((e=>"front"===e||"tail"===e))))}:j),[B,N,e,j]),{filteredFoils:q}=(0,p.c)(B||N?e:r,S||{brands:[],series:[],type:[]}),{searchedFoils:U}=(0,u.P)(B||N?r:q,s),E=o.useMemo((()=>{if(B||N){if(s){return[...q,...U.filter((r=>!e.some((e=>e.model===r.model&&e.brand===r.brand))))]}return q}if(s){const r=U.filter((r=>!e.some((e=>e.model===r.model&&e.brand===r.brand))));return[...e,...r]}return e}),[e,q,U,s,B,N]),{sortOption:_,setSortOption:Q,sortedFoils:z}=(0,h.A)(E),V=(0,o.useCallback)((r=>{const t=e.filter((e=>!(e.model===r.model&&e.brand===r.brand)));x?.(t),R(`Removed ${r.model} from your comparison`),T(!0),setTimeout((()=>T(!1)),2e3)}),[e,x]),M=(0,o.useCallback)((r=>{const t=e.some((e=>e.model===r.model&&e.brand===r.brand));if(t&&B)if("web"===a.A.OS){window.confirm(`Are you sure you want to remove ${r.model} from your comparison?`)&&V(r)}else i.A.alert("Remove Foil",`Are you sure you want to remove ${r.model} from your comparison?`,[{text:"Cancel",style:"cancel"},{text:"Remove",style:"destructive",onPress:()=>V(r)}]);else{if(t){const t=e.filter((e=>!(e.model===r.model&&e.brand===r.brand)));x?.(t),R(`Removed ${r.model} from your collection`)}else x?.([...e,r]),R(`Added ${r.model} to your collection`);T(!0),setTimeout((()=>T(!1)),2e3)}}),[e,x,B,V]),Y=(0,o.useCallback)((r=>!!B&&(!!s&&!e.some((e=>e.model===r.model&&e.brand===r.brand)))),[e,B,s]),L=(0,o.useCallback)((r=>!e.some((e=>e.model===r.model&&e.brand===r.brand))),[e]);return(0,y.jsxs)(n.A,{style:[f.container,{backgroundColor:I.background.primary}],children:[b?.(),(0,y.jsx)(n.A,{style:f.content,children:(0,y.jsx)(l.o,{foils:z,columns:t,sortOption:{field:_.field,ascending:"asc"===_.direction},onSort:e=>{Q((r=>({field:e,direction:r.field===e&&"asc"===r.direction?"desc":"asc"})))},onFoilSelect:M,isSelected:Y,isTemporary:L,filters:S||{brands:[],series:[],type:[]},filterOptions:P})}),A?.(),O&&(0,y.jsx)(c.y,{message:D,type:"success"})]})},f=s.A.create({container:Object.assign({flex:1},"web"===a.A.OS?{maxWidth:"100%",width:"100%",overflow:"hidden"}:{padding:0}),content:Object.assign({flex:1},"web"===a.A.OS?{padding:0}:{})})},2933:(e,r,t)=>{t.d(r,{o:()=>f});var o=t(6665),n=t(3929),s=t(6283),i=t(5708),a=t(4307),l=t(3668),c=t(5991),d=t(558),u=t(4667),m=t(2763),h=t(5535),p=t(5025),y=t(2348),g=t(397);const f=({foils:e,onSort:r,onFoilSelect:t,isSelected:l,isTemporary:y,sortOption:f,columns:b,filters:A,filterOptions:w,selectedFoils:v,onCompare:j,onClearSelection:S})=>{const{width:C}=(0,d.A)(),{colors:k}=(m.Dy,(0,u.D)());(0,o.useEffect)((()=>{(async()=>{try{const e=await(0,h.QZ)();!e||e.field===f.field&&e.ascending===f.ascending||r(e.field)}catch(e){}})()}),[]),(0,o.useEffect)((()=>{(async()=>{try{await(0,h.pC)({field:f.field,ascending:f.ascending})}catch(e){}})()}),[f]);const I=e=>m.lU[e]||150,O=e=>{switch(e){case"brand":return A.brands.length>0;case"series":return A.series.length>0;case"type":return A.type.length>0;default:return!1}},T=(e,r)=>{let t="-";switch(r){case"brand":t=e.brand;break;case"model":t=e.model;break;case"series":t=e.series||"-";break;case"area":t=e.specs?.area?.toFixed(2)||"-";break;case"wingspan":t=e.specs?.wingspan?.toFixed(2)||"-";break;case"aspectRatio":t=e.specs?.aspectRatio?.toFixed(2)||"-";break;case"type":t=e.type||"-";break;case"price":t=e.price?`$${e.price}`:"-";break;case"link":return(0,g.jsxs)(i.A,{style:[x.linkButton,{backgroundColor:k.primary}],onPress:()=>window.open(e.sourceUrl,"_blank"),children:[(0,g.jsx)(s.A,{style:[x.linkText,{color:k.text.inverse}],children:"View"}),(0,g.jsx)(s.A,{style:[x.externalLinkIcon,{color:k.text.inverse}],children:"\u2197"})]})}return(0,g.jsx)(s.A,{style:[x.cellText,{color:k.text.primary},["area","wingspan","aspectRatio","price"].includes(r)&&x.numberText],children:t})},D=(0,m.lD)(b);return(0,g.jsx)(n.A,{style:x.container,children:(0,g.jsx)(a.A,{horizontal:!0,showsHorizontalScrollIndicator:!0,style:x.horizontalScrollView,contentContainerStyle:{width:D,flexGrow:0,margin:0,padding:0},children:(0,g.jsxs)(n.A,{style:[x.tableContent,{width:D}],children:[(0,g.jsx)(n.A,{style:[x.tableHeader,{backgroundColor:k.background.tertiary}],children:(0,g.jsx)(n.A,{style:[x.headerRow,{borderBottomColor:k.border,backgroundColor:k.background.secondary}],children:b.map((e=>{return e.isVisible&&(0,g.jsxs)(i.A,{style:[x.headerCell,{width:I(e.id),borderRightColor:k.text.tertiary+"40",borderBottomColor:O(e.id)?k.primary:k.border,backgroundColor:k.background.tertiary,borderRightWidth:1},O(e.id)&&x.headerCellFiltered],onPress:()=>{return t=e.id,(0,p.k4)(p.R2.SORT_FOILS,{field:t,direction:f.field===t&&f.ascending?"desc":"asc"}),void r(t);var t},children:[(0,g.jsx)(s.A,{style:[x.headerText,{color:O(e.id)?k.primary:k.text.primary,fontWeight:"600"}],children:e.label}),(t=e.id,f.field!==t?(0,g.jsxs)(n.A,{style:x.sortIconContainer,children:[(0,g.jsx)(s.A,{style:[x.sortIcon,{color:k.text.tertiary}],children:"\u25b2"}),(0,g.jsx)(s.A,{style:[x.sortIcon,{color:k.text.tertiary}],children:"\u25bc"})]}):(0,g.jsxs)(n.A,{style:x.sortIconContainer,children:[(0,g.jsx)(s.A,{style:[x.sortIcon,f.ascending&&[x.sortIconUpActive,{color:k.primary}]],children:"\u25b2"}),(0,g.jsx)(s.A,{style:[x.sortIcon,!f.ascending&&[x.sortIconDownActive,{color:k.primary}]],children:"\u25bc"})]}))]},e.id);var t}))})}),(0,g.jsx)(a.A,{style:[x.scrollView,{backgroundColor:k.background.primary}],showsVerticalScrollIndicator:!0,bounces:!1,children:e.map(((e,r)=>{const o=l(e),s=y?.(e),a=`${e.model}-${e.specs?.area||"unknown"}-${r}`;return(0,g.jsx)(i.A,{onPress:()=>t(e),style:({pressed:e})=>[x.row,{borderBottomColor:k.border},r%2===0&&[x.rowEven,{backgroundColor:k.background.secondary+"50"}],o&&[x.rowSelected,{backgroundColor:`${k.primary}15`}],s&&[x.rowTemporary,{backgroundColor:`${k.success}10`}],"web"===c.A.OS&&e&&!o&&[x.rowHovered,{backgroundColor:`${k.primary}10`}]],children:b.map((r=>r.isVisible&&(0,g.jsx)(n.A,{style:[x.cell,{width:I(r.id),borderRightColor:k.border,borderRightWidth:1}],children:T(e,r.id)},`${a}-${r.id}`)))},a)}))})]})})})},x=l.A.create({container:{flex:1,width:"100%",overflow:"hidden"},horizontalScrollView:{flex:1,width:"100%"},tableContent:{flex:1,width:"100%"},tableHeader:{borderBottomWidth:1,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.05,shadowRadius:1,elevation:2},headerRow:{flexDirection:"row",borderBottomWidth:1,width:"100%",minWidth:"fit-content",flexShrink:0},headerCell:Object.assign({flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:y.Y.MEDIUM,borderRightWidth:1,borderBottomWidth:1},"web"===c.A.OS&&{cursor:"pointer",transition:"all 0.2s ease"}),headerCellFiltered:{borderBottomWidth:2},headerText:{fontSize:14,flex:1,letterSpacing:.3},row:Object.assign({flexDirection:"row",borderBottomWidth:1,width:"100%",minWidth:"fit-content",flexShrink:0},"web"===c.A.OS&&{margin:0,padding:0}),rowEven:{},rowSelected:{borderStyle:"solid"},rowHovered:{borderStyle:"solid"},cell:{padding:y.Y.MEDIUM,borderRightWidth:1},cellText:{fontSize:14},numberText:{textAlign:"right"},scrollView:{flex:1},sortIconContainer:{flexDirection:"column",alignItems:"center",height:28,justifyContent:"center",width:16,gap:y.Y.XSMALL,marginLeft:y.Y.SMALL},sortIcon:{fontSize:12,width:12,height:10,lineHeight:10,textAlign:"center"},sortIconUpActive:{fontSize:13},sortIconDownActive:{fontSize:13},linkButton:Object.assign({paddingHorizontal:8,paddingVertical:4,borderRadius:4,minWidth:44,alignItems:"center",position:"relative"},"web"===c.A.OS&&{cursor:"pointer"}),linkText:{fontSize:12,fontWeight:"600"},externalLinkIcon:{position:"absolute",top:0,right:2,fontSize:12,fontWeight:"600"},rowTemporary:{borderStyle:"dashed"}})},9353:(e,r,t)=>{t.d(r,{a:()=>s});var o=t(5229),n=t(397);const s=({title:e,description:r,canonicalUrl:t,imageUrl:s})=>{const i=`${e} | FoilQuiver`;return(0,n.jsxs)(o.mg,{children:[(0,n.jsx)("title",{children:i}),(0,n.jsx)("meta",{name:"description",content:r}),t&&(0,n.jsx)("link",{rel:"canonical",href:t}),(0,n.jsx)("meta",{property:"og:title",content:i}),(0,n.jsx)("meta",{property:"og:description",content:r}),s&&(0,n.jsx)("meta",{property:"og:image",content:s}),(0,n.jsx)("meta",{name:"twitter:title",content:i}),(0,n.jsx)("meta",{name:"twitter:description",content:r}),s&&(0,n.jsx)("meta",{name:"twitter:image",content:s})]})}},8481:(e,r,t)=>{t.d(r,{y:()=>u});var o=t(6665),n=t(6283),s=t(3668),i=t(3299),a=t(5991),l=t(4667),c=t(2348),d=t(397);const u=({message:e,type:r="success",duration:t=2e3})=>{const{colors:s}=(0,l.D)(),a=(0,o.useRef)(new i.A.Value(0)).current;(0,o.useEffect)((()=>{i.A.sequence([i.A.timing(a,{toValue:1,duration:200,useNativeDriver:!0}),i.A.delay(t-400),i.A.timing(a,{toValue:0,duration:200,useNativeDriver:!0})]).start()}),[t,a]);return(0,d.jsx)(i.A.View,{style:[m.container,{backgroundColor:(()=>{switch(r){case"success":return s.success;case"error":return s.error;default:return s.primary}})(),opacity:a}],children:(0,d.jsx)(n.A,{style:[m.message,{color:s.text.inverse}],children:e})})},m=s.A.create({container:Object.assign({position:"absolute",bottom:c.Y.LARGE,left:"50%",transform:[{translateX:-150}],minWidth:300,maxWidth:400,padding:c.Y.MEDIUM,borderRadius:8,flexDirection:"row",alignItems:"center",justifyContent:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.15,shadowRadius:8,elevation:4,zIndex:1e3},"web"===a.A.OS&&{cursor:"default",userSelect:"none"}),message:{fontSize:14,fontWeight:"600",textAlign:"center"}})},6680:(e,r,t)=>{t.d(r,{P:()=>n});var o=t(6665);function n(e,r){return{searchedFoils:(0,o.useMemo)((()=>{if(!r.trim())return e;const t=r.toLowerCase().trim();return e.filter((e=>[e.brand,e.model,e.series||"",e.type||"",e.specs?.area?.toString()||"",e.specs?.wingspan?.toString()||"",e.specs?.aspectRatio?.toString()||""].join(" ").toLowerCase().includes(t)))}),[e,r])}}},9058:(e,r,t)=>{t.d(r,{A:()=>n});var o=t(6665);function n(e){const[r,t]=(0,o.useState)({field:"area",direction:"desc"}),n=(0,o.useMemo)((()=>{return t=e,o=r.field,n=r.direction,[...t].sort(((e,r)=>{let t,s;"brand"===o||"series"===o||"model"===o||"type"===o?(t=e[o].toLowerCase(),s=r[o].toLowerCase()):"price"===o?(t=e.price||0,s=r.price||0):o in e.specs?(t=e.specs[o]||0,s=r.specs[o]||0):(t="",s="");const i="asc"===n?1:-1;return"string"===typeof t&&"string"===typeof s?t.localeCompare(s)*i:"number"===typeof t&&"number"===typeof s?(t-s)*i:0}));var t,o,n}),[e,r]);return{sortOption:r,setSortOption:t,sortedFoils:n}}},7358:(e,r,t)=>{t.r(r),t.d(r,{default:()=>F});var o=t(6665),n=t(3929),s=t(3668),i=t(9629),a=t(7821),l=t(6283),c=t(5708),d=t(397);function u({message:e,onRetry:r}){return(0,d.jsxs)(n.A,{style:m.container,children:[(0,d.jsx)(l.A,{style:m.message,children:e}),r&&(0,d.jsx)(c.A,{style:({pressed:e})=>[m.retryButton,e&&m.retryButtonPressed],onPress:r,children:(0,d.jsx)(l.A,{style:m.retryButtonText,children:"Retry"})})]})}const m=s.A.create({container:{padding:20,alignItems:"center",backgroundColor:"#ffebee",borderRadius:8,margin:16},message:{color:"#c62828",fontSize:16,textAlign:"center",marginBottom:12},retryButton:{backgroundColor:"#c62828",paddingHorizontal:20,paddingVertical:10,borderRadius:6},retryButtonPressed:{backgroundColor:"#b71c1c"},retryButtonText:{color:"#fff",fontSize:14,fontWeight:"bold"}});var h=t(5663),p=t(209),y=t(4812),g=t(5648),f=t(5991),x=t(1690),b=t(415),A=t(4667),w=t(5025),v=t(2348),j=t(382),S=t(2167);const C=({foils:e,allFoils:r,columns:t,quiverName:s="Untitled Quiver",quiverId:i,searchQuery:c="",onSearch:u,onUpdateQuiver:m,onClose:p,isLoading:y,error:v})=>{const{colors:C}=(0,A.D)(),{filters:I,setFilters:O,selectedFoils:T,setSelectedFoils:D}=(0,h.n)(),[R,F]=(0,o.useState)(e),[B,N]=(0,o.useState)(!1),P=(0,S.cq)();(0,o.useEffect)((()=>(O({brands:[],series:[],type:[]}),()=>{O({brands:[],series:[],type:[]})})),[O]),(0,o.useEffect)((()=>{T.length>0&&B&&(F(T),N(!1))}),[T,B]),(0,o.useEffect)((()=>()=>{D([])}),[D]);const q=async()=>{try{R.map((e=>(0,j.h)(e)));await(m?.(R)),N(!1),(0,w.k4)(w.R2.UPDATE_QUIVER,{quiverId:i,quiverName:s,foilCount:R.length})}catch(v){"web"===f.A.OS?window.alert("Failed to save changes. Please try again."):x.A.alert("Error","Failed to save changes. Please try again.")}},U=()=>{if("web"===f.A.OS){window.confirm("Are you sure you want to revert all changes?")&&(F(e),N(!1))}else x.A.alert("Revert Changes","Are you sure you want to revert all changes?",[{text:"Cancel",style:"cancel"},{text:"Revert",style:"destructive",onPress:()=>{F(e),N(!1)}}])},E=()=>{if(B)if("web"===f.A.OS){window.confirm("You have unsaved changes. Are you sure you want to close?")&&P.navigate("Browse",{})}else x.A.alert("Unsaved Changes","You have unsaved changes. Are you sure you want to close?",[{text:"Cancel",style:"cancel"},{text:"Close",style:"destructive",onPress:()=>P.navigate("Browse",{})}]);else P.navigate("Browse",{})};if(y)return(0,d.jsx)(n.A,{style:k.centerContainer,children:(0,d.jsx)(a.I,{})});if(v)return(0,d.jsxs)(n.A,{style:k.centerContainer,children:[(0,d.jsx)(l.A,{style:[k.errorText,{color:C.error}],children:v}),(0,d.jsx)(g.A,{style:[k.retryButton,{backgroundColor:C.primary}],onPress:E,children:(0,d.jsx)(l.A,{style:[k.buttonText,{color:C.text.inverse}],children:"Go Back"})})]});return(0,d.jsx)(n.A,{style:k.container,children:(0,d.jsx)(b.I,{foils:R,allFoils:r,columns:t,searchQuery:c,onSearch:u,onUpdateFoils:e=>{F(e),N(!0)},renderHeader:()=>(0,d.jsxs)(n.A,{style:k.header,children:[(0,d.jsxs)(l.A,{style:[k.headerText,{color:C.text.primary}],children:["Viewing Saved Quiver: ",s]}),B&&(0,d.jsx)(l.A,{style:[k.unsavedText,{color:C.warning}],children:"You have unsaved changes"})]}),renderControls:()=>(0,d.jsx)(n.A,{style:k.controlsContainer,children:(0,d.jsx)(n.A,{style:k.controlsInnerContainer,children:(0,d.jsxs)(n.A,{style:k.controlsColumn,children:[B&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.A,{style:[k.saveButton,{backgroundColor:C.success}],onPress:q,children:(0,d.jsx)(l.A,{style:[k.buttonText,{color:C.text.inverse}],children:"Save Changes"})}),(0,d.jsx)(g.A,{style:[k.revertButton,{backgroundColor:C.warning}],onPress:U,children:(0,d.jsx)(l.A,{style:[k.buttonText,{color:C.text.inverse}],children:"Revert Changes"})})]}),(0,d.jsx)(g.A,{style:[k.closeButton,{backgroundColor:C.primary}],onPress:E,children:(0,d.jsx)(l.A,{style:[k.buttonText,{color:C.text.inverse}],children:"Close Quiver"})})]})})}),filterOptions:{brands:Array.from(new Set(R.map((e=>e.brand)))),series:Array.from(new Set(R.map((e=>e.series)).filter((e=>!!e)))),types:Array.from(new Set(R.map((e=>e.type)).filter((e=>"front"===e||"tail"===e))))},selectedFilters:I,onFilterChange:(e,r)=>{O((t=>Object.assign({},t,{[e]:t[e].includes(r)?t[e].filter((e=>e!==r)):[...t[e],r]})))},onClearFilters:()=>{O({brands:[],series:[],type:[]})}})})},k=s.A.create({container:{flex:1,position:"relative"},centerContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:v.Y.CONTENT_PADDING},header:{padding:v.Y.HEADER_PADDING,borderBottomWidth:1},headerText:{fontSize:20,fontWeight:"600"},unsavedText:{fontSize:14,marginTop:v.Y.SMALL},errorText:{fontSize:16,textAlign:"center",marginBottom:v.Y.LARGE},controlsContainer:Object.assign({position:"absolute",bottom:v.Y.CONTROLS_CONTAINER_BOTTOM,right:0,left:0,paddingHorizontal:v.Y.CONTROLS_CONTAINER_PADDING,zIndex:1e3},"web"===f.A.OS&&{pointerEvents:"none"}),controlsInnerContainer:{alignItems:"flex-end"},controlsColumn:Object.assign({alignItems:"flex-end",gap:v.Y.BUTTON_GAP},"web"===f.A.OS&&{pointerEvents:"auto"}),closeButton:Object.assign({paddingHorizontal:v.Y.BUTTON_PADDING_H,paddingVertical:v.Y.BUTTON_PADDING_V,borderRadius:8},"web"===f.A.OS&&{cursor:"pointer",pointerEvents:"auto",userSelect:"none",boxShadow:"0px 2px 4px rgba(0,0,0,0.1)"}),saveButton:Object.assign({paddingHorizontal:v.Y.BUTTON_PADDING_H,paddingVertical:v.Y.BUTTON_PADDING_V,borderRadius:8},"web"===f.A.OS&&{cursor:"pointer",pointerEvents:"auto",userSelect:"none",boxShadow:"0px 2px 4px rgba(0,0,0,0.1)"}),revertButton:Object.assign({paddingHorizontal:v.Y.BUTTON_PADDING_H,paddingVertical:v.Y.BUTTON_PADDING_V,borderRadius:8},"web"===f.A.OS&&{cursor:"pointer",pointerEvents:"auto",userSelect:"none",boxShadow:"0px 2px 4px rgba(0,0,0,0.1)"}),retryButton:Object.assign({paddingHorizontal:v.Y.BUTTON_PADDING_H,paddingVertical:v.Y.BUTTON_PADDING_V,borderRadius:8,marginTop:v.Y.MEDIUM},"web"===f.A.OS&&{cursor:"pointer"}),buttonText:Object.assign({fontSize:14,fontWeight:"600"},"web"===f.A.OS&&{userSelect:"none"})});var I=t(9353),O=t(3295),T=t(8481),D=t(9659);const R=s.A.create({container:{flex:1}}),F=({route:e,navigation:r,searchProps:t,tableSettingsProps:s})=>{const[l,c]=(0,o.useTransition)(),{setCurrentScreen:m,columns:g,setColumns:f,filters:x,setFilters:b,searchQuery:v,setSearchQuery:S,setSelectedFoils:k}=(0,h.n)(),{foils:F=[],loading:B,error:N}=(0,p.J)(),{quivers:P=[],isLoading:q,error:U,deleteQuiver:E,updateQuiver:_,reloadQuivers:Q}=(0,y.X)(),{colors:z}=(0,A.D)(),[V,M]=(0,o.useState)(!1),[Y,L]=(0,o.useState)(""),[W,G]=(0,o.useState)("success"),H=(0,O.Qq)(),$=o.useMemo((()=>e.params?.foil_ids&&Array.isArray(F)?(k([]),F.filter((r=>{if(!r)return!1;const t=(0,j.h)(r);return e.params.foil_ids?.includes(t)??!1}))):[]),[e.params?.foil_ids,F,k]),X=o.useMemo((()=>P.find((r=>r.id===e.params?.quiverId))),[P,e.params?.quiverId]);o.useMemo((()=>({brands:Array.from(new Set(F?.map((e=>e.brand))||[])),series:Array.from(new Set(F?.map((e=>e.series)).filter(Boolean)||[])),types:Array.from(new Set(F?.map((e=>e.type)).filter(Boolean)||[]))})),[F]);(0,o.useEffect)((()=>{m("Quiver"),e.params?.quiverId&&(k([]),Q(),(0,w.oe)(w.R2.VIEW_QUIVER,{quiverId:e.params.quiverId,quiverName:e.params.quiverName||"Untitled Quiver",foilCount:$.length}))}),[e.params?.quiverId]);if(B||q||l)return(0,d.jsx)(i.e,{showFooter:!0,children:(0,d.jsx)(a.I,{})});const J=N||U;return J?(0,d.jsx)(i.e,{showFooter:!0,children:(0,d.jsx)(u,{message:J})}):Array.isArray(F)&&Array.isArray($)?X?(0,d.jsxs)(i.e,{showFooter:!0,children:[(0,d.jsx)(I.a,{title:`${e.params?.quiverName||"Quiver"} - FoilQuiver`,description:`View and manage your ${e.params?.quiverName||"Untitled"} quiver containing ${$.length} foils.`,canonicalUrl:`${H.webUrl}${D.JZ.quiver}/${e.params?.quiverId}`}),(0,d.jsxs)(n.A,{style:R.container,children:[(0,d.jsx)(C,{foils:$,allFoils:F,columns:g,quiverName:e.params?.quiverName||"Untitled Quiver",quiverId:e.params?.quiverId||"",searchQuery:v,onSearch:e=>{S(e),(0,w.k4)(w.R2.SEARCH_FOILS,{screen:"quiver",query:e})},onUpdateQuiver:async t=>{const{quiverId:o}=e.params;try{k(t);const n=t.map((e=>(0,j.h)(e)));await _(o,{foil_ids:n})?(r.setParams({quiverId:o,quiverName:e.params.quiverName||"Untitled Quiver",foil_ids:n,searchQuery:e.params.searchQuery}),await Q(),(0,w.k4)(w.R2.UPDATE_QUIVER,{quiverId:o,quiverName:e.params.quiverName,foilCount:t.length}),L("Quiver updated successfully"),G("success")):(L("Failed to update quiver"),G("error"))}catch(J){L("An error occurred while updating the quiver"),G("error")}M(!0),setTimeout((()=>M(!1)),3e3)},onClose:()=>{c((()=>{r.goBack()}))},isLoading:l,error:J}),V&&(0,d.jsx)(T.y,{message:Y,type:W,duration:3e3})]})]}):(0,d.jsx)(i.e,{showFooter:!0,children:(0,d.jsx)(u,{message:"Quiver not found"})}):(0,d.jsx)(i.e,{showFooter:!0,children:(0,d.jsx)(u,{message:"Invalid data structure received"})})}}}]);
//# sourceMappingURL=358.752e8569.chunk.js.map