(self.webpackChunkweb=self.webpackChunkweb||[]).push([[792],{9166:(e,t,r)=>{var n=r(2299),o=r(6665),s=r(6520),i=r(2167),a=r(5229),l=r(8833),c=r(3929),d=r(6283),u=r(3668),h=r(5648),m=r(5991),p=r(4667),y=r(2348),g=r(397);class x extends o.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}handleRetry=()=>{this.setState({hasError:!1,error:null})};render(){return this.state.hasError?(0,g.jsx)(b,{error:this.state.error,onRetry:this.handleRetry}):this.props.children}}const b=({error:e,onRetry:t})=>{const{colors:r}=(0,p.D)();return(0,g.jsx)(c.A,{style:[f.container,{backgroundColor:r.background.primary}],children:(0,g.jsxs)(c.A,{style:f.content,children:[(0,g.jsx)(d.A,{style:[f.title,{color:r.error}],children:"Something went wrong"}),(0,g.jsx)(d.A,{style:[f.message,{color:r.text.secondary}],children:e?.message||"An unexpected error occurred"}),(0,g.jsx)(h.A,{style:[f.button,{backgroundColor:r.primary}],onPress:t,children:(0,g.jsx)(d.A,{style:[f.buttonText,{color:r.text.inverse}],children:"Try Again"})}),!1]})})},f=u.A.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:y.Y.LARGE},content:{maxWidth:600,width:"100%",alignItems:"center"},title:{fontSize:24,fontWeight:"bold",marginBottom:y.Y.MEDIUM,textAlign:"center"},message:{fontSize:16,marginBottom:y.Y.LARGE,textAlign:"center"},button:Object.assign({paddingHorizontal:y.Y.LARGE,paddingVertical:y.Y.MEDIUM,borderRadius:8,marginBottom:y.Y.LARGE},"web"===m.A.OS&&{cursor:"pointer"}),buttonText:{fontSize:16,fontWeight:"600"},stack:{fontSize:12,fontFamily:"ios"===m.A.OS?"Menlo":"monospace",marginTop:y.Y.LARGE,padding:y.Y.MEDIUM,width:"100%"}});var A=r(5663),j=r(7821),v=r(6447),w=r(3295),S=r(8587),C=r(5708),I=r(558),T=r(13),E=r(6773),O=r(1385),M=r(2763);const k=({value:e,onChangeText:t,onClear:r,placeholder:n="Search foils...",autoFocus:o=!1,mode:s="browse",onFocus:i})=>{const{colors:a}=(0,p.D)(),{width:l}=(0,I.A)(),u=l<M.Dy;return(0,g.jsxs)(c.A,{style:[B.container,{backgroundColor:a.background.secondary}],children:["web"===m.A.OS?(0,g.jsx)(d.A,{style:[B.searchIcon,{color:a.text.secondary}],children:"\ud83d\udd0d"}):(0,g.jsx)(O.A,{name:"search",size:20,color:a.text.secondary}),(0,g.jsx)(E.A,Object.assign({style:[B.input,{color:a.text.primary}],value:e,onChangeText:t,placeholder:(()=>{if(u)switch(s){case"comparison":case"quiver":return"Search to add...";default:return"Search foils..."}switch(s){case"comparison":return"Search foils to add to comparison...";case"quiver":return"Search foils to add to quiver...";default:return"Search foils..."}})(),placeholderTextColor:a.text.tertiary,autoFocus:o,onFocus:i,autoCapitalize:"none",autoCorrect:!1,clearButtonMode:"never",returnKeyType:"search",maxFontSizeMultiplier:1},"web"===m.A.OS?{spellCheck:!1,autoComplete:"off"}:{keyboardType:"web-search"})),""!==e&&(0,g.jsx)(h.A,{onPress:r,style:B.clearButton,children:"web"===m.A.OS?(0,g.jsx)(d.A,{style:[B.clearIcon,{color:a.text.secondary}],children:"\u2715"}):(0,g.jsx)(O.A,{name:"close-circle",size:20,color:a.text.secondary})})]})},B=u.A.create({container:{flexDirection:"row",alignItems:"center",paddingHorizontal:y.Y.MEDIUM,height:40,borderRadius:8,gap:y.Y.SMALL},input:Object.assign({flex:1,fontSize:16,height:"100%"},"web"===m.A.OS&&{outlineStyle:"none",border:"none",background:"transparent",lineHeight:40}),clearButton:Object.assign({height:"100%",aspectRatio:1,alignItems:"center",justifyContent:"center"},"web"===m.A.OS&&{cursor:"pointer"}),searchIcon:{fontSize:16,width:20,height:20,textAlign:"center",lineHeight:20},clearIcon:{fontSize:16,width:20,height:20,textAlign:"center",lineHeight:20}});var D=r(8264),q=r(4307),R=r(484),_=r(9149),N=r(3600),P=r(4635),F=r(6721);const z=({onSuccess:e})=>((0,o.useEffect)((()=>{const t=()=>{if("web"!==m.A.OS||!window.google)return;window.google.accounts.id.initialize({client_id:F.E5,callback:async t=>{try{const{error:r}=await P.N.auth.signInWithIdToken({provider:"google",token:t.credential});if(r)return;e?.()}catch(r){}},use_fedcm_for_prompt:!0});const t=document.getElementById("google-signin-button");t&&window.google.accounts.id.renderButton(t,{type:"standard",theme:"outline",size:"large",text:"signin_with",shape:"pill"})};if("web"===m.A.OS){const e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.onload=t,document.body.appendChild(e),()=>{document.body.removeChild(e)}}}),[e]),"web"!==m.A.OS?null:(0,g.jsx)(c.A,{style:L.container,children:(0,g.jsx)("div",{id:"google-signin-button"})})),L=u.A.create({container:{alignItems:"center",justifyContent:"center",minHeight:40}});function W({filterOptions:e,selectedBrands:t,selectedSeries:r,selectedTypes:n,onFilterChange:s,onClearFilters:i,columns:a,onColumnVisibilityChange:l,onResetColumns:u,foils:h}){const[y,x]=(0,o.useState)(!1),[b,f]=(0,o.useState)("filters"),{colors:A,isDark:j,toggleTheme:w}=(0,p.D)(),[S,I]=(0,o.useState)(null),[T,E]=(0,o.useState)(null),[M,k]=(0,o.useState)(!1);(0,o.useEffect)((()=>{(async()=>{try{const{data:{session:e},error:t}=await P.N.auth.getSession();if(t)return;if(I(e),E(e?.user??null),e){const{data:{session:e},error:t}=await P.N.auth.refreshSession();if(t)return;e&&(I(e),E(e.user))}}catch(e){}})();const{data:{subscription:e}}=P.N.auth.onAuthStateChange((async(e,t)=>{"TOKEN_REFRESHED"===e?(I(t),E(t?.user??null)):"SIGNED_OUT"===e?(I(null),E(null)):"SIGNED_IN"===e&&(I(t),E(t?.user??null))})),t=setInterval((async()=>{const{data:{session:e}}=await P.N.auth.getSession();if(e){const{data:{session:e},error:t}=await P.N.auth.refreshSession();if(t)return;e&&(I(e),E(e.user))}}),36e5);return()=>{e.unsubscribe(),clearInterval(t)}}),[]),(0,o.useEffect)((()=>{(async()=>{try{const e=await(0,N.Ir)();e&&(e.brands.forEach((e=>s("brands",e))),e.series.forEach((e=>s("series",e))),e.types.forEach((e=>s("type",e))));const t=await(0,N.E7)();if(t){const e=Object.fromEntries(a.map((e=>[e.id,e.isVisible])));Object.entries(t).forEach((([t,r])=>{e[t]!==r&&l(t)}))}}catch(e){}})()}),[]),(0,o.useEffect)((()=>{(async()=>{try{const e={brands:t,series:r,types:n};await(0,N.ri)(e)}catch(e){}})()}),[t,r,n]),(0,o.useEffect)((()=>{(async()=>{try{const e={};a.forEach((t=>{e[t.id]=t.isVisible})),await(0,N.pF)(e)}catch(e){}})()}),[a]);const B=(0,o.useMemo)((()=>{if(0===t.length)return e.series;const r=new Set;return h.forEach((e=>{t.includes(e.brand)&&e.series&&r.add(e.series)})),Array.from(r).sort()}),[e.series,t,h]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(C.A,{onPress:()=>x(!0),style:[U.iconButton,{backgroundColor:A.background.secondary}],children:(0,g.jsx)(_.A,{name:"settings",size:24,color:A.text.primary})}),(0,g.jsx)(D.A,{visible:y,transparent:!0,animationType:"fade",onRequestClose:()=>x(!1),children:(0,g.jsx)(C.A,{style:[U.modalOverlay,{backgroundColor:j?"rgba(0, 0, 0, 0.7)":"rgba(0, 0, 0, 0.5)"}],onPress:()=>x(!1),children:(0,g.jsxs)(C.A,{style:[U.modalContent,{backgroundColor:A.background.primary}],onPress:e=>e.stopPropagation(),children:[(0,g.jsxs)(c.A,{style:[U.modalHeader,{borderBottomColor:A.border}],children:[(0,g.jsx)(d.A,{style:[U.modalTitle,{color:A.text.primary}],children:"Settings"}),(0,g.jsx)(C.A,{onPress:()=>x(!1),style:U.closeButton,children:(0,g.jsx)(_.A,{name:"close",size:24,color:A.text.secondary})})]}),(0,g.jsxs)(c.A,{style:[U.tabs,{borderBottomColor:A.border}],children:[(0,g.jsx)(C.A,{style:[U.tab,"filters"===b&&[U.activeTab,{borderBottomColor:A.primary}]],onPress:()=>f("filters"),children:(0,g.jsxs)(d.A,{style:[U.tabText,{color:A.text.secondary},"filters"===b&&[U.activeTabText,{color:A.primary}]],children:["Filters ",(t.length>0||r.length>0||n.length>0)&&"\u2022"]})}),(0,g.jsx)(C.A,{style:[U.tab,"columns"===b&&[U.activeTab,{borderBottomColor:A.primary}]],onPress:()=>f("columns"),children:(0,g.jsxs)(d.A,{style:[U.tabText,{color:A.text.secondary},"columns"===b&&[U.activeTabText,{color:A.primary}]],children:["Columns ",a.some((e=>!e.isVisible))&&"\u2022"]})}),(0,g.jsx)(C.A,{style:[U.tab,"appearance"===b&&[U.activeTab,{borderBottomColor:A.primary}]],onPress:()=>f("appearance"),children:(0,g.jsx)(d.A,{style:[U.tabText,{color:A.text.secondary},"appearance"===b&&[U.activeTabText,{color:A.primary}]],children:"Appearance"})}),(0,g.jsx)(C.A,{style:[U.tab,"account"===b&&[U.activeTab,{borderBottomColor:A.primary}]],onPress:()=>f("account"),children:(0,g.jsx)(d.A,{style:[U.tabText,{color:A.text.secondary},"account"===b&&[U.activeTabText,{color:A.primary}]],children:"Account"})})]}),"filters"===b?(0,g.jsx)(c.A,{style:U.contentWrapper,children:(0,g.jsx)(q.A,{style:U.scrollView,contentContainerStyle:U.scrollContent,children:(0,g.jsxs)(c.A,{style:U.content,children:[(0,g.jsxs)(c.A,{style:U.headerWithAction,children:[(0,g.jsx)(d.A,{style:[U.contentTitle,{color:A.text.primary}],children:"Active Filters"}),(t.length>0||r.length>0||n.length>0)&&(0,g.jsx)(C.A,{onPress:i,style:[U.clearButton,{backgroundColor:A.background.secondary}],children:(0,g.jsx)(d.A,{style:[U.clearButtonText,{color:A.text.secondary}],children:"Clear All"})})]}),(0,g.jsxs)(c.A,{style:U.section,children:[(0,g.jsx)(d.A,{style:[U.sectionTitle,{color:A.text.primary}],children:"Brand"}),(0,g.jsx)(c.A,{style:U.chipContainer,children:e.brands.map((e=>(0,g.jsx)(C.A,{style:[U.chip,{backgroundColor:A.background.secondary},t.includes(e)&&[U.chipSelected,{backgroundColor:A.primary}]],onPress:()=>s("brands",e),children:(0,g.jsx)(d.A,{style:[U.chipText,{color:A.text.secondary},t.includes(e)&&[U.chipTextSelected,{color:A.text.inverse}]],children:e})},e)))})]}),(0,g.jsxs)(c.A,{style:U.section,children:[(0,g.jsx)(d.A,{style:[U.sectionTitle,{color:A.text.primary}],children:"Type"}),(0,g.jsx)(c.A,{style:U.chipContainer,children:e.types.map((e=>(0,g.jsx)(C.A,{style:[U.chip,{backgroundColor:A.background.secondary},n.includes(e)&&[U.chipSelected,{backgroundColor:A.primary}]],onPress:()=>s("type",e),children:(0,g.jsx)(d.A,{style:[U.chipText,{color:A.text.secondary},n.includes(e)&&[U.chipTextSelected,{color:A.text.inverse}]],children:e})},e)))})]}),(0,g.jsxs)(c.A,{style:U.section,children:[(0,g.jsx)(d.A,{style:[U.sectionTitle,{color:A.text.primary}],children:"Series"}),(0,g.jsx)(c.A,{style:U.chipContainer,children:B.length>0?B.map((e=>(0,g.jsx)(C.A,{style:[U.chip,{backgroundColor:A.background.secondary},r.includes(e)&&[U.chipSelected,{backgroundColor:A.primary}]],onPress:()=>s("series",e),children:(0,g.jsx)(d.A,{style:[U.chipText,{color:A.text.secondary},r.includes(e)&&[U.chipTextSelected,{color:A.text.inverse}]],children:e})},e))):(0,g.jsx)(d.A,{style:[U.noSeriesText,{color:A.text.secondary}],children:"No series available for selected brands"})})]})]})})}):"columns"===b?(0,g.jsx)(c.A,{style:U.contentWrapper,children:(0,g.jsx)(q.A,{style:U.scrollView,contentContainerStyle:U.scrollContent,children:(0,g.jsxs)(c.A,{style:U.content,children:[(0,g.jsxs)(c.A,{style:U.headerWithAction,children:[(0,g.jsx)(d.A,{style:[U.contentTitle,{color:A.text.primary}],children:"Visible Columns"}),a.some((e=>!e.isVisible))&&(0,g.jsx)(C.A,{onPress:async()=>{u();try{const e={};a.forEach((t=>{e[t.id]=t.isVisible})),await(0,N.pF)(e)}catch(e){}},style:[U.clearButton,{backgroundColor:A.background.secondary}],children:(0,g.jsx)(d.A,{style:[U.clearButtonText,{color:A.text.secondary}],children:"Reset"})})]}),(0,g.jsx)(c.A,{style:U.columnList,children:a.map((e=>(0,g.jsxs)(C.A,{style:U.columnItem,onPress:()=>(async e=>{l(e)})(e.id),children:[(0,g.jsx)(d.A,{style:[U.columnLabel,{color:A.text.primary}],children:e.label}),(0,g.jsx)(c.A,{style:[U.checkbox,{borderColor:A.border},e.isVisible&&[U.checkboxChecked,{backgroundColor:A.primary,borderColor:A.primary}]],children:e.isVisible&&(0,g.jsx)(_.A,{name:"check",size:16,color:A.text.inverse})})]},e.id)))})]})})}):"appearance"===b?(0,g.jsx)(c.A,{style:U.contentWrapper,children:(0,g.jsx)(q.A,{style:U.scrollView,contentContainerStyle:U.scrollContent,children:(0,g.jsxs)(c.A,{style:U.content,children:[(0,g.jsx)(d.A,{style:[U.contentTitle,{color:A.text.primary}],children:"Theme Settings"}),(0,g.jsx)(c.A,{style:U.section,children:(0,g.jsx)(C.A,{style:[U.menuButton,{backgroundColor:A.background.secondary}],onPress:w,children:(0,g.jsxs)(c.A,{style:U.menuButtonContent,children:[(0,g.jsx)(_.A,{name:j?"dark-mode":"light-mode",size:20,color:A.text.primary}),(0,g.jsx)(d.A,{style:[U.menuButtonText,{color:A.text.primary}],children:j?"Dark Mode":"Light Mode"})]})})})]})})}):S?(0,g.jsx)(c.A,{style:U.contentWrapper,children:(0,g.jsx)(q.A,{style:U.scrollView,contentContainerStyle:U.scrollContent,children:(0,g.jsxs)(c.A,{style:U.content,children:[(0,g.jsxs)(c.A,{style:U.userInfo,children:[T?.user_metadata?.avatar_url&&(0,g.jsx)(R.A,{source:{uri:T.user_metadata.avatar_url},style:U.avatarImage}),(0,g.jsxs)(c.A,{style:U.userTextInfo,children:[(0,g.jsx)(d.A,{style:[U.userName,{color:A.text.primary}],children:T?.user_metadata?.full_name||T?.email}),(0,g.jsx)(d.A,{style:[U.userEmail,{color:A.text.secondary}],children:T?.email})]})]}),(0,g.jsx)(c.A,{style:[U.menuDivider,{backgroundColor:A.border}]}),(0,g.jsxs)(c.A,{style:U.section,children:[(0,g.jsx)(d.A,{style:[U.sectionTitle,{color:A.text.primary}],children:"Quivers"}),(0,g.jsxs)(C.A,{style:[U.menuButton,{backgroundColor:A.background.secondary}],onPress:()=>{k(!0)},children:[(0,g.jsxs)(c.A,{style:U.menuButtonContent,children:["web"===m.A.OS?(0,g.jsx)(d.A,{style:{fontSize:20,color:A.text.primary},children:"\ud83c\udfaf"}):(0,g.jsx)(O.A,{name:"bookmark-outline",size:20,color:A.text.primary}),(0,g.jsx)(d.A,{style:[U.menuButtonText,{color:A.text.primary}],children:"Manage Quivers"})]}),(0,g.jsx)(_.A,{name:"chevron-right",size:20,color:A.text.secondary})]})]}),(0,g.jsx)(c.A,{style:U.section,children:(0,g.jsx)(C.A,{style:({pressed:e})=>[U.menuButton,{backgroundColor:A.background.secondary},e&&{opacity:.7}],onPress:()=>{(async()=>{try{const{data:{session:e}}=await P.N.auth.getSession();if(!e)return I(null),E(null),void x(!1);"web"===m.A.OS&&window.google?.accounts&&window.google.accounts.id.revoke(T?.email||"",(()=>{})),await P.N.auth.signOut({scope:"local"}),I(null),E(null),x(!1)}catch(e){I(null),E(null),x(!1)}})()},role:"button",children:(0,g.jsxs)(c.A,{style:U.menuButtonContent,children:["web"===m.A.OS?(0,g.jsx)(d.A,{style:{fontSize:20,color:A.text.primary},children:"\u21e5"}):(0,g.jsx)(O.A,{name:"log-out-outline",size:20,color:A.text.primary}),(0,g.jsx)(d.A,{style:[U.menuButtonText,{color:A.text.primary}],children:"Sign Out"})]})})})]})})}):(0,g.jsx)(c.A,{style:U.contentWrapper,children:(0,g.jsxs)(c.A,{style:U.content,children:[(0,g.jsx)(d.A,{style:[U.contentTitle,{color:A.text.primary,marginBottom:16}],children:"Sign In"}),(0,g.jsx)(z,{onSuccess:()=>{x(!1)}})]})})]})})}),(0,g.jsx)(D.A,{visible:M,transparent:!0,animationType:"fade",onRequestClose:()=>k(!1),children:(0,g.jsx)(c.A,{style:[U.modalOverlay,{backgroundColor:"rgba(0, 0, 0, 0.5)"}],onStartShouldSetResponder:()=>!0,children:(0,g.jsx)(c.A,{style:[U.modalContent,{backgroundColor:A.background.primary}],children:(0,g.jsx)(v.G,{selectedFoils:[],onClose:()=>k(!1),initialTab:"saved",standalone:!0})})})})]})}const U=u.A.create({container:{position:"relative"},button:{padding:y.Y.MEDIUM},iconButton:{padding:y.Y.XSMALL,borderRadius:8},modalContent:{width:"100%",maxWidth:600,borderRadius:12,maxHeight:"90%",overflow:"hidden"},modalHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:y.Y.LARGE,borderBottomWidth:1},buttonGroup:{flexDirection:"row",alignItems:"center",gap:y.Y.SMALL},columnGroup:{flexDirection:"column",gap:y.Y.MEDIUM},filterGroup:{padding:y.Y.MEDIUM},filterList:{gap:y.Y.MEDIUM},modalOverlay:{flex:1,justifyContent:"center",alignItems:"center",padding:y.Y.LARGE},modalTitle:{fontSize:18,fontWeight:"600"},closeButton:{padding:4},tabs:{flexDirection:"row",borderBottomWidth:1},tab:{flex:1,padding:12,alignItems:"center"},activeTab:{borderBottomWidth:2},tabText:{fontSize:14,fontWeight:"500"},activeTabText:{},content:{padding:16,width:"100%"},contentWrapper:{flex:1},scrollView:{flex:1},scrollContent:{flexGrow:1},section:{marginBottom:24},sectionTitle:{fontSize:14,fontWeight:"600",marginBottom:12},chipContainer:{flexDirection:"row",flexWrap:"wrap",gap:8},chip:{borderRadius:16,paddingHorizontal:12,paddingVertical:6},chipSelected:{},chipText:{fontSize:14},chipTextSelected:{},columnList:{gap:12},columnItem:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingVertical:8},columnLabel:{fontSize:14},checkbox:{width:20,height:20,borderRadius:4,borderWidth:2,alignItems:"center",justifyContent:"center"},checkboxChecked:{},headerWithAction:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:16},contentTitle:{fontSize:16,fontWeight:"600"},clearButton:{paddingHorizontal:12,paddingVertical:6,borderRadius:16},clearButtonText:{fontSize:14},noSeriesText:{fontSize:14,fontWeight:"500"},userInfo:{flexDirection:"row",alignItems:"center",gap:12,marginBottom:16},userTextInfo:{flex:1},avatarImage:{width:48,height:48,borderRadius:24},userName:{fontSize:16,fontWeight:"600",marginBottom:4},userEmail:{fontSize:14},menuDivider:{height:1,marginBottom:16},menuButton:Object.assign({flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:12,borderRadius:8},"web"===m.A.OS&&{cursor:"pointer",userSelect:"none",outline:"none",WebkitTapHighlightColor:"transparent"}),menuButtonContent:{flexDirection:"row",alignItems:"center",gap:12},menuButtonText:{fontSize:14,fontWeight:"500"}});var V=r(209),Q=r(2419),Y=r(9659),G=r(382);const H=["children"],J=o.lazy((()=>r.e(269).then(r.bind(r,3269)))),X=o.lazy((()=>r.e(415).then(r.bind(r,6415)))),Z=o.lazy((()=>r.e(358).then(r.bind(r,7358)))),$=o.lazy((()=>r.e(951).then(r.bind(r,8951)))),K=o.lazy((()=>r.e(50).then(r.bind(r,3050)))),ee=o.lazy((()=>r.e(553).then(r.bind(r,4553)))),te=(0,T.A)(),re={home:"home-outline",browse:"search-outline",compare:"git-compare-outline",settings:"settings-outline",quiver:"bookmark-outline"};function ne({name:e,color:t}){if("web"===m.A.OS){const r={home:"\ud83c\udfe0",browse:"\ud83d\udd0d",compare:"\u2696\ufe0f",settings:"\u2699\ufe0f",quiver:"\ud83d\udd16"};return(0,g.jsx)(d.A,{style:{fontSize:20,color:t},children:r[e]})}return(0,g.jsx)(O.A,{name:re[e],size:24,color:t})}(0,w.Qq)().webUrl,Y.JZ.browse,Y.JZ.comparison,Y.JZ.quiver,Y.JZ.terms,Y.JZ.privacy,Y.JZ.contact;const oe=e=>{let{children:t}=e,r=(0,S.A)(e,H);return(0,g.jsx)(o.Suspense,{fallback:(0,g.jsx)(j.I,{}),children:o.cloneElement(t,r)})},se=()=>{const e=(0,i.cq)(),{colors:t}=(0,p.D)(),{width:r}=(0,I.A)(),n=r<M.Dy,{foils:s}=(0,V.J)(),{searchQuery:a,setSearchQuery:l,filters:u,setFilters:m,columns:y,setColumns:x,setCurrentScreen:b}=(0,A.n)(),{filterOptions:f}=(0,Q.c)(s,u),{showQuiverManager:j}=(0,o.useContext)(ae),v=o.useMemo((()=>s?.length?[...new Set(s.map((e=>e.brand)))].sort():[]),[s]),w=()=>{e.navigate("Browse",{})},S=t=>{l(t),e.setParams({searchQuery:t})},T=e=>"Comparison"===e.name?"comparison":"Quiver"===e.name?"quiver":"browse",E=e=>{switch(e.name){case"Comparison":return"Search foils to add to comparison...";case"Quiver":return"Search foils to add to quiver...";default:return"Search foils..."}},O=t=>{"Browse"===t.name&&e.setParams({showSearchDropdown:!0})},B=(e,t)=>{((e,t)=>{m((r=>Object.assign({},r,{[e]:r[e].includes(t)?r[e].filter((e=>e!==t)):[...r[e],t]})))})(e,t)},D=()=>{m({brands:[],series:[],type:[]})},q=e=>{x((t=>t.map((t=>t.id===e?Object.assign({},t,{isVisible:!t.isVisible}):t))))},R=()=>{x(M._X)},_=o.useMemo((()=>(0,M.lD)(y)),[y]);o.useMemo((()=>(0,M.y6)(_,r,n)),[_,r,n]),o.useMemo((()=>n?"100%":Math.min(_+2*M.Op,r)),[_,r,n]);(0,o.useEffect)((()=>{(async()=>{try{const e=await(0,N.E7)();if(e){const t=M._X.map((t=>Object.assign({},t,{isVisible:"boolean"===typeof e[t.id]?e[t.id]:t.isVisible})));x(t)}}catch(e){}})()}),[]),(0,o.useEffect)((()=>{(async()=>{try{const e=await(0,N.Ir)();e&&m({brands:e.brands||[],series:e.series||[],type:e.types||[]})}catch(e){}})()}),[]);const P=o.useMemo((()=>{if(n)return{width:"100%",paddingHorizontal:M.Op};const e=(0,M.lD)(y);return{width:e,maxWidth:(0,M.y6)(e,r,!1),alignSelf:"center"}}),[y,r,n]),F=e=>n?(0,g.jsxs)(c.A,{style:ie.headerRightContainerMobile,children:[(0,g.jsx)(h.A,{style:[ie.headerButton],onPress:j,children:(0,g.jsx)(ne,{name:"quiver",color:t.text.primary})}),(0,g.jsx)(W,{filterOptions:f,selectedBrands:u.brands,selectedSeries:u.series,selectedTypes:u.type,onFilterChange:B,onClearFilters:D,columns:y,onColumnVisibilityChange:q,onResetColumns:R,foils:s})]}):(0,g.jsxs)(c.A,{style:ie.headerRightContainerWeb,children:[(0,g.jsxs)(h.A,{style:[ie.headerButton],onPress:j,children:[(0,g.jsx)(ne,{name:"quiver",color:t.text.primary}),!n&&(0,g.jsx)(d.A,{style:[ie.headerButtonText,{color:t.text.primary}],children:"My Quivers"})]}),(0,g.jsx)(W,{filterOptions:f,selectedBrands:u.brands,selectedSeries:u.series,selectedTypes:u.type,onFilterChange:B,onClearFilters:D,columns:y,onColumnVisibilityChange:q,onResetColumns:R,foils:s})]});return(0,g.jsxs)(te.Navigator,{screenOptions:{headerStyle:{backgroundColor:t.background.primary},headerShadowVisible:!1},children:[(0,g.jsx)(te.Screen,{name:"Browse",options:({route:e})=>({headerTitle:e.params?.title||"",headerLeft:()=>(0,g.jsx)(c.A,{style:[ie.headerOuterContainer,{backgroundColor:t.background.primary},!n&&{alignItems:"center"}],children:n?(0,g.jsx)(c.A,{style:ie.headerMainContainerMobile,children:(0,g.jsxs)(c.A,{style:ie.headerTopRowMobile,children:[(0,g.jsx)(C.A,{onPress:w,style:({pressed:e})=>[ie.logoContainerMobile,e&&ie.logoPressed],children:(0,g.jsx)(d.A,{style:[ie.headerTitleMobile,{color:t.primary}],children:"Foilquiver"})}),(0,g.jsx)(c.A,{style:ie.searchBarContainerMobile,children:(0,g.jsx)(k,{value:a,onChangeText:e=>S(e),onClear:()=>S(""),mode:T(e),placeholder:E(e),onFocus:()=>O(e)})}),F()]})}):(0,g.jsx)(c.A,{style:[ie.headerMainContainerWeb,P],children:(0,g.jsxs)(c.A,{style:[ie.headerContentWeb,{width:"100%",alignItems:"center",justifyContent:"space-between"}],children:[(0,g.jsx)(C.A,{onPress:w,style:({pressed:e})=>[ie.logoContainer,e&&ie.logoPressed],children:(0,g.jsx)(d.A,{style:[ie.headerTitle,{color:t.primary}],children:"Foilquiver"})}),(0,g.jsx)(c.A,{style:[ie.searchBarContainerWeb,{flex:1}],children:(0,g.jsx)(k,{value:a,onChangeText:e=>S(e),onClear:()=>S(""),mode:T(e),placeholder:E(e),onFocus:()=>O(e)})}),F()]})})})}),children:e=>(0,g.jsx)(oe,{children:(0,g.jsx)(J,Object.assign({},e,{filters:u,onFilterChange:B,columns:y,brands:v}))})}),(0,g.jsx)(te.Screen,{name:"Comparison",options:({route:e})=>({headerTitle:e.params?.title||"",headerLeft:()=>(0,g.jsx)(c.A,{style:[ie.headerOuterContainer,{backgroundColor:t.background.primary},!n&&{alignItems:"center"}],children:n?(0,g.jsx)(c.A,{style:ie.headerMainContainerMobile,children:(0,g.jsxs)(c.A,{style:ie.headerTopRowMobile,children:[(0,g.jsx)(C.A,{onPress:w,style:({pressed:e})=>[ie.logoContainerMobile,e&&ie.logoPressed],children:(0,g.jsx)(d.A,{style:[ie.headerTitleMobile,{color:t.primary}],children:"Foilquiver"})}),(0,g.jsx)(c.A,{style:ie.searchBarContainerMobile,children:(0,g.jsx)(k,{value:a,onChangeText:e=>S(e),onClear:()=>S(""),mode:T(e),placeholder:E(e),onFocus:()=>O(e)})}),F()]})}):(0,g.jsx)(c.A,{style:[ie.headerMainContainerWeb,P],children:(0,g.jsxs)(c.A,{style:[ie.headerContentWeb,{width:"100%",alignItems:"center",justifyContent:"space-between"}],children:[(0,g.jsx)(C.A,{onPress:w,style:({pressed:e})=>[ie.logoContainer,e&&ie.logoPressed],children:(0,g.jsx)(d.A,{style:[ie.headerTitle,{color:t.primary}],children:"Foilquiver"})}),(0,g.jsx)(c.A,{style:[ie.searchBarContainerWeb,{flex:1}],children:(0,g.jsx)(k,{value:a,onChangeText:e=>S(e),onClear:()=>S(""),mode:T(e),placeholder:E(e),onFocus:()=>O(e)})}),F()]})})})}),children:e=>(0,g.jsx)(oe,{children:(0,g.jsx)(X,Object.assign({},e))})}),(0,g.jsx)(te.Screen,{name:"Quiver",options:({route:e})=>({headerTitle:"",headerLeft:()=>(0,g.jsx)(c.A,{style:[ie.headerOuterContainer,{backgroundColor:t.background.primary},!n&&{alignItems:"center"}],children:n?(0,g.jsx)(c.A,{style:ie.headerMainContainerMobile,children:(0,g.jsxs)(c.A,{style:ie.headerTopRowMobile,children:[(0,g.jsx)(C.A,{onPress:w,style:({pressed:e})=>[ie.logoContainerMobile,e&&ie.logoPressed],children:(0,g.jsx)(d.A,{style:[ie.headerTitleMobile,{color:t.primary}],children:"Foilquiver"})}),(0,g.jsx)(c.A,{style:ie.searchBarContainerMobile,children:(0,g.jsx)(k,{value:a,onChangeText:e=>S(e),onClear:()=>S(""),mode:T(e),placeholder:E(e),onFocus:()=>O(e)})}),F()]})}):(0,g.jsx)(c.A,{style:[ie.headerMainContainerWeb,P],children:(0,g.jsxs)(c.A,{style:[ie.headerContentWeb,{width:"100%",alignItems:"center",justifyContent:"space-between"}],children:[(0,g.jsx)(C.A,{onPress:w,style:({pressed:e})=>[ie.logoContainer,e&&ie.logoPressed],children:(0,g.jsx)(d.A,{style:[ie.headerTitle,{color:t.primary}],children:"Foilquiver"})}),(0,g.jsx)(c.A,{style:[ie.searchBarContainerWeb,{flex:1}],children:(0,g.jsx)(k,{value:a,onChangeText:e=>S(e),onClear:()=>S(""),mode:T(e),placeholder:E(e),onFocus:()=>O(e)})}),F()]})})})}),children:e=>{const t=o.useMemo((()=>e.route.params?.foil_ids&&Array.isArray(s)?s.filter((t=>{if(!t)return!1;const r=(0,G.h)(t);return e.route.params.foil_ids.includes(r)})):[]),[e.route.params?.foil_ids,s]);return(0,g.jsx)(oe,{children:(0,g.jsx)(Z,Object.assign({},e,{searchProps:{value:a,onChangeText:S,onClear:()=>l(""),mode:"quiver",placeholder:"Search foils in quiver..."},tableSettingsProps:{filterOptions:f,selectedBrands:u.brands,selectedSeries:u.series,selectedTypes:u.type,onFilterChange:B,onClearFilters:D,columns:y,onColumnVisibilityChange:q,onResetColumns:R,foils:t}}))})}}),(0,g.jsx)(te.Screen,{name:"Terms",options:{headerShown:!1},children:e=>(0,g.jsx)(oe,{children:(0,g.jsx)(K,Object.assign({},e))})}),(0,g.jsx)(te.Screen,{name:"Privacy",options:{headerShown:!1},children:e=>(0,g.jsx)(oe,{children:(0,g.jsx)($,Object.assign({},e))})}),(0,g.jsx)(te.Screen,{name:"Contact",options:{headerShown:!1},children:e=>(0,g.jsx)(oe,{children:(0,g.jsx)(ee,Object.assign({},e))})})]})},ie=u.A.create({headerOuterContainer:{flex:1,paddingHorizontal:M.Op},headerMainContainerMobile:{width:"100%"},headerTopRowMobile:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",height:48,width:"100%",gap:8},logoContainerMobile:{height:"100%",justifyContent:"center",minWidth:80},headerTitleMobile:{fontSize:18,fontWeight:"bold"},searchBarContainerMobile:{flex:1,height:36,minWidth:120,maxWidth:200},headerRightContainerMobile:{flexDirection:"row",alignItems:"center",gap:4,zIndex:2e3},headerMainContainerWeb:{height:72,width:"100%"},headerContentWeb:{flexDirection:"row",alignItems:"center",gap:24,height:"100%",width:"100%"},searchBarContainerWeb:{flex:1,height:40},logoContainer:{height:"100%",justifyContent:"center",minWidth:120},logoPressed:{opacity:.7},headerTitle:{fontSize:24,fontWeight:"bold"},headerRightContainerWeb:{flexDirection:"row",alignItems:"center",gap:16,paddingRight:M.Op,zIndex:2e3},headerButton:Object.assign({flexDirection:"row",alignItems:"center",gap:8,padding:6,borderRadius:8},"web"===m.A.OS&&{cursor:"pointer",userSelect:"none"}),headerButtonText:{fontSize:14,fontWeight:"500"}}),ae=o.createContext({showQuiverManager:()=>{},hideQuiverManager:()=>{}});(0,n.A)((function(){const e=(0,i.bE)(),[t,r]=(0,o.useState)(!1),n=()=>r(!1),d={prefixes:(0,w.vA)(),config:{screens:{Browse:{path:"/",parse:{mode:e=>e},stringify:{mode:e=>e}},Comparison:{path:"/comparison",exact:!0,stringify:{quiverName:e=>e,foils:e=>JSON.stringify(e)}},Quiver:{path:"/quiver/:quiverId",parse:{quiverId:e=>e,quiverName:e=>e,foils:e=>e?JSON.parse(e):void 0},stringify:{quiverId:e=>e,quiverName:e=>e,foils:e=>JSON.stringify(e)}},Terms:"/terms",Privacy:"/privacy",Contact:"/contact"}},getStateFromPath:(e,t)=>"/comparison"===e?{routes:[{name:"Comparison",params:{}}]}:(0,i.Bd)(e,t),getPathFromState:(e,t)=>{if("Comparison"===e.routes[e.routes.length-1].name)return"/comparison";return(0,i.Fy)(e,t)||"/"}};return(0,g.jsx)(p.N,{children:(0,g.jsx)(A.D,{children:(0,g.jsx)(ae.Provider,{value:{showQuiverManager:()=>r(!0),hideQuiverManager:n},children:(0,g.jsx)(a.vd,{children:(0,g.jsx)(x,{children:(0,g.jsx)(l.Oy,{children:(0,g.jsx)(s.A,{ref:e,linking:d,fallback:(0,g.jsx)(j.I,{}),children:(0,g.jsxs)(c.A,{style:{flex:1},children:[(0,g.jsx)(se,{}),t&&(0,g.jsx)(v.G,{standalone:!1,isModalVisible:t,onClose:n,initialTab:"saved"})]})})})})})})})})}))},7821:(e,t,r)=>{r.d(t,{I:()=>d});r(6665);var n=r(3929),o=r(6283),s=r(530),i=r(3668),a=r(4667),l=r(2348),c=r(397);const d=({message:e="Loading...",size:t="large",fullScreen:r=!0})=>{const{colors:i}=(0,a.D)();return(0,c.jsxs)(n.A,{style:[u.container,r&&u.fullScreen,{backgroundColor:i.background.primary}],children:[(0,c.jsx)(s.A,{size:t,color:i.primary}),e&&(0,c.jsx)(o.A,{style:[u.message,{color:i.text.secondary}],children:e})]})},u=i.A.create({container:{padding:l.Y.LARGE,alignItems:"center",justifyContent:"center"},fullScreen:{flex:1},message:{marginTop:l.Y.MEDIUM,fontSize:16,textAlign:"center"}})},6447:(e,t,r)=>{r.d(t,{G:()=>S});var n=r(6665),o=r(3929),s=r(6283),i=r(3668),a=r(5648),l=r(8264),c=r(6773),d=r(4307),u=r(1690),h=r(5991),m=r(558),p=r(1385),y=r(2167),g=r(4812),x=r(4667),b=r(2763),f=r(2348),A=r(5025),j=r(5663),v=r(382),w=r(397);const S=({selectedFoils:e=[],onClose:t,initialTab:r="save",standalone:i=!1,isModalVisible:f,hideStandaloneButton:S=!1,onQuiverSaved:I})=>{const{colors:T}=(0,x.D)(),{width:E}=(0,m.A)(),O=E<b.Dy,M=(0,y.cq)(),{setSelectedFoils:k}=(0,j.n)(),[B,D]=(0,n.useState)(!i),q=void 0!==f?f:B,[R,_]=(0,n.useState)(""),[N,P]=(0,n.useState)(""),[F,z]=(0,n.useState)(r),[L,W]=(0,n.useState)(null),[U,V]=(0,n.useState)(""),{quivers:Q,isLoading:Y,error:G,createQuiver:H,deleteQuiver:J,reloadQuivers:X,updateQuiver:Z}=(0,g.X)(),$=async()=>{if(L&&U.trim())try{await Z(L,{name:U.trim()})&&((0,A.k4)(A.R2.UPDATE_QUIVER,{quiverId:L,action:"rename"}),"web"===h.A.OS?window.alert("Quiver renamed successfully"):u.A.alert("Success","Quiver renamed successfully"),W(null),V(""),X())}catch(G){u.A.alert("Error","Failed to rename quiver")}},K=e=>e.foil_ids&&Array.isArray(e.foil_ids)?e.foil_ids.length:0,ee=(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(o.A,{style:[C.modalHeader,{borderBottomColor:T.border}],children:[(0,w.jsx)(s.A,{style:[C.modalTitle,{color:T.text.primary}],children:"Manage Quivers"}),t&&(0,w.jsx)(a.A,{onPress:t,children:"web"===h.A.OS?(0,w.jsx)(s.A,{style:{fontSize:24,color:T.text.primary},children:"\xd7"}):(0,w.jsx)(p.A,{name:"close",size:24,color:T.text.primary})})]}),e.length>0&&(0,w.jsxs)(o.A,{style:[C.tabContainer,{borderBottomColor:T.border}],children:[(0,w.jsx)(a.A,{style:[C.tab,"save"===F&&[C.activeTab,{borderBottomColor:T.primary}]],onPress:()=>z("save"),children:(0,w.jsx)(s.A,{style:[C.tabText,{color:"save"===F?T.primary:T.text.secondary}],children:"Save Quiver"})}),(0,w.jsx)(a.A,{style:[C.tab,"saved"===F&&[C.activeTab,{borderBottomColor:T.primary}]],onPress:()=>z("saved"),children:(0,w.jsx)(s.A,{style:[C.tabText,{color:"saved"===F?T.primary:T.text.secondary}],children:"Saved Quivers"})})]}),(0,w.jsx)(d.A,{style:C.modalBody,children:"save"===F?(0,w.jsxs)(o.A,{style:C.form,children:[(0,w.jsxs)(o.A,{style:C.formField,children:[(0,w.jsx)(s.A,{style:[C.label,{color:T.text.secondary}],children:"Name"}),(0,w.jsx)(c.A,{style:[C.input,{color:T.text.primary,borderColor:T.border,backgroundColor:T.background.secondary}],value:R,onChangeText:_,placeholder:"Enter quiver name",placeholderTextColor:T.text.tertiary})]}),(0,w.jsxs)(o.A,{style:C.formField,children:[(0,w.jsx)(s.A,{style:[C.label,{color:T.text.secondary}],children:"Description (optional)"}),(0,w.jsx)(c.A,{style:[C.input,C.textArea,{color:T.text.primary,borderColor:T.border,backgroundColor:T.background.secondary}],value:N,onChangeText:P,placeholder:"Enter description",placeholderTextColor:T.text.tertiary,multiline:!0,numberOfLines:3})]}),(0,w.jsx)(a.A,{style:[C.createButton,{backgroundColor:T.primary}],onPress:async()=>{if(R.trim())try{const r=await H({name:R.trim(),description:N.trim(),foils:e});if(!r)throw new Error("Failed to create quiver - no result returned");(0,A.k4)(A.R2.SAVE_QUIVER,{foilCount:e.length,isNewQuiver:!0,fromComparison:e.length>0}),_(""),P(""),D(!1),t?.(),I?.(r.id,r.name),M.navigate("Quiver",{quiverId:r.id,quiverName:r.name,foil_ids:e.map((e=>(0,v.h)(e)))})}catch(G){"web"===h.A.OS?window.alert(`Failed to save quiver: ${G instanceof Error?G.message:"Unknown error"}`):u.A.alert("Error",`Failed to save quiver: ${G instanceof Error?G.message:"Unknown error"}`)}else"web"===h.A.OS?window.alert("Please enter a name for your quiver"):u.A.alert("Error","Please enter a name for your quiver")},children:(0,w.jsx)(s.A,{style:[C.buttonText,{color:T.text.inverse}],children:e.length>0?"Save Quiver":"Create Empty Quiver"})})]}):(0,w.jsx)(o.A,{style:C.quiverList,children:Y?(0,w.jsx)(o.A,{style:C.centerContent,children:(0,w.jsx)(s.A,{style:[C.message,{color:T.text.secondary}],children:"Loading quivers..."})}):G?(0,w.jsx)(o.A,{style:C.centerContent,children:(0,w.jsx)(s.A,{style:[C.message,{color:T.error}],children:G})}):(0,w.jsxs)(o.A,{children:[0===Q.length?(0,w.jsx)(o.A,{style:C.centerContent,children:(0,w.jsx)(s.A,{style:[C.message,{color:T.text.secondary}],children:"No saved quivers yet"})}):Q.map((e=>(0,w.jsxs)(o.A,{style:[C.quiverItem,{borderBottomColor:T.border}],children:[(0,w.jsx)(a.A,{style:C.quiverInfo,onPress:()=>(e=>{D(!1),t?.(),k([]),M.navigate("Quiver",{quiverId:e.id,quiverName:e.name,foil_ids:e.foil_ids||[]})})(e),children:L===e.id?(0,w.jsxs)(o.A,{style:C.renameContainer,children:[(0,w.jsx)(c.A,{style:[C.renameInput,{color:T.text.primary,borderColor:T.border,backgroundColor:T.background.secondary}],value:U,onChangeText:V,placeholder:"Enter new name",placeholderTextColor:T.text.tertiary,autoFocus:!0}),(0,w.jsx)(a.A,{style:[C.renameButton,{backgroundColor:T.error}],onPress:()=>{W(null),V("")},children:(0,w.jsx)(s.A,{style:[C.renameButtonText,{color:T.text.inverse}],children:"Cancel"})}),(0,w.jsx)(a.A,{style:[C.renameButton,{backgroundColor:T.primary}],onPress:$,children:(0,w.jsx)(s.A,{style:[C.renameButtonText,{color:T.text.inverse}],children:"Save"})})]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(o.A,{style:C.quiverNameContainer,children:[(0,w.jsx)(s.A,{style:[C.quiverName,{color:T.text.primary}],children:e.name}),(0,w.jsx)(a.A,{onPress:()=>(e=>{W(e.id),V(e.name)})(e),style:C.renameIcon,children:"web"===h.A.OS?(0,w.jsx)(s.A,{style:{color:T.text.secondary},children:"\u270e"}):(0,w.jsx)(p.A,{name:"pencil",size:16,color:T.text.secondary})})]}),e.description&&(0,w.jsx)(s.A,{style:[C.quiverDescription,{color:T.text.secondary}],children:e.description}),(0,w.jsxs)(s.A,{style:[C.quiverMeta,{color:T.text.tertiary}],children:[K(e)," foils \u2022 ",new Date(e.updated_at).toLocaleDateString()]})]})}),"web"===h.A.OS?(0,w.jsx)("button",{type:"button",onClick:()=>{try{window.confirm("Are you sure you want to delete this quiver? This action cannot be undone.")&&J(e.id).then((e=>{e?X():window.alert("Failed to delete quiver")})).catch((e=>{window.alert("Error deleting quiver")}))}catch(G){window.alert("Error in delete operation")}},style:{padding:"8px",borderWidth:"1px",borderStyle:"solid",borderColor:T.error,borderRadius:"8px",minWidth:"70px",backgroundColor:T.background.primary,cursor:"pointer",color:T.error,fontWeight:"600",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,position:"relative",pointerEvents:"auto"},children:"Delete"}):(0,w.jsx)(a.A,{style:[C.deleteButton,{borderColor:T.error,backgroundColor:T.background.primary}],onPress:()=>{(async e=>{try{if(!await new Promise((e=>{u.A.alert("Delete Quiver","Are you sure you want to delete this quiver? This action cannot be undone.",[{text:"Cancel",style:"cancel",onPress:()=>e(!1)},{text:"Delete",style:"destructive",onPress:()=>e(!0)}],{cancelable:!1})})))return;await J(e)?((0,A.k4)(A.R2.DELETE_QUIVER,{quiverId:e}),u.A.alert("Success","Quiver deleted successfully")):u.A.alert("Error","Failed to delete quiver. Please try again.")}catch(G){u.A.alert("Error","An unexpected error occurred. Please try again.")}})(e.id)},children:(0,w.jsx)(p.A,{name:"trash-outline",size:20,color:T.error})})]},e.id))),(0,w.jsx)(o.A,{style:C.createButtonContainer,children:(0,w.jsx)(a.A,{style:[C.createEmptyButton,{backgroundColor:T.primary}],onPress:()=>z("save"),children:(0,w.jsx)(s.A,{style:[C.buttonText,{color:T.text.inverse}],children:"Create New Quiver"})})})]})})})]});return i?ee:(0,w.jsxs)(w.Fragment,{children:[e.length>0&&!i&&!f&&!S&&(0,w.jsxs)(a.A,{style:[C.saveButton,{backgroundColor:T.primary}],onPress:()=>D(!0),children:["web"===h.A.OS?(0,w.jsx)(s.A,{style:{fontSize:20,color:T.text.inverse,marginRight:8},children:"+"}):(0,w.jsx)(p.A,{name:"bookmark-outline",size:20,color:T.text.inverse}),(0,w.jsx)(s.A,{style:[C.buttonText,{color:T.text.inverse}],children:"Save Quiver"})]}),(0,w.jsx)(l.A,{visible:q,transparent:!0,animationType:"fade",onRequestClose:()=>{D(!1),t?.()},children:(0,w.jsx)(a.A,{style:[C.modalOverlay,i&&C.standaloneOverlay],activeOpacity:1,onPress:()=>{D(!1),t?.()},children:(0,w.jsx)(a.A,{style:[C.modalContent,{backgroundColor:T.background.primary},O&&C.modalContentMobile],activeOpacity:1,onPress:e=>{e.preventDefault(),e.stopPropagation()},children:ee})})})]})},C=i.A.create({saveButton:Object.assign({flexDirection:"row",alignItems:"center",justifyContent:"center",paddingHorizontal:f.Y.LARGE,paddingVertical:f.Y.MEDIUM,borderRadius:8,gap:8,minHeight:40,minWidth:120},"web"===h.A.OS&&{cursor:"pointer",pointerEvents:"auto",userSelect:"none",boxShadow:"0px 2px 4px rgba(0,0,0,0.1)"}),buttonText:Object.assign({fontSize:14,fontWeight:"600",textAlign:"center"},"web"===h.A.OS&&{userSelect:"none"}),modalOverlay:Object.assign({position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center",padding:b.Op,zIndex:2e3},"web"===h.A.OS&&{position:"absolute",pointerEvents:"auto"}),modalContent:Object.assign({width:"100%",maxWidth:600,borderRadius:12,maxHeight:"90%",zIndex:2001},"web"===h.A.OS&&{pointerEvents:"auto",userSelect:"none"}),modalContentMobile:{maxWidth:"100%"},modalHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:f.Y.LARGE,borderBottomWidth:1},modalTitle:{fontSize:20,fontWeight:"600"},modalBody:{flex:1},tabContainer:{flexDirection:"row",borderBottomWidth:1},tab:{flex:1,paddingVertical:f.Y.MEDIUM,alignItems:"center"},activeTab:{borderBottomWidth:2},tabText:{fontSize:16,fontWeight:"500"},form:{padding:f.Y.LARGE},formField:{marginBottom:f.Y.LARGE},label:{fontSize:14,marginBottom:f.Y.SMALL},input:Object.assign({height:40,borderWidth:1,borderRadius:8,paddingHorizontal:f.Y.MEDIUM,fontSize:16},"web"===h.A.OS&&{outlineStyle:"none"}),textArea:{height:80,paddingTop:f.Y.MEDIUM,textAlignVertical:"top"},createButton:{paddingVertical:f.Y.MEDIUM,borderRadius:8,alignItems:"center"},quiverList:{padding:f.Y.LARGE},quiverItem:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingVertical:f.Y.MEDIUM,borderBottomWidth:1},quiverInfo:Object.assign({flex:1,marginRight:f.Y.MEDIUM},"web"===h.A.OS&&{cursor:"pointer"}),quiverName:{fontSize:16,fontWeight:"600",marginBottom:4},quiverDescription:{fontSize:14,marginBottom:4},quiverMeta:{fontSize:12},deleteButton:Object.assign({padding:f.Y.SMALL,borderWidth:1,borderRadius:8,minWidth:"web"===h.A.OS?70:40,alignItems:"center",justifyContent:"center",zIndex:10},"web"===h.A.OS&&{cursor:"pointer",pointerEvents:"auto",userSelect:"none",position:"relative"}),deleteIcon:{fontSize:14,fontWeight:"600"},centerContent:{padding:f.Y.LARGE,alignItems:"center"},message:{fontSize:16},standaloneOverlay:{position:"relative",backgroundColor:"transparent"},renameContainer:{flexDirection:"row",alignItems:"center",gap:f.Y.SMALL},renameInput:{flex:1,height:32,borderWidth:1,borderRadius:4,paddingHorizontal:f.Y.SMALL,fontSize:14},renameButton:{paddingHorizontal:f.Y.MEDIUM,paddingVertical:f.Y.SMALL,borderRadius:4},renameButtonText:{fontSize:12,fontWeight:"500"},quiverNameContainer:{flexDirection:"row",alignItems:"center",gap:f.Y.SMALL},renameIcon:Object.assign({padding:f.Y.SMALL},"web"===h.A.OS&&{cursor:"pointer"}),createButtonContainer:{borderTopWidth:1,marginTop:f.Y.LARGE,paddingTop:f.Y.LARGE,paddingBottom:f.Y.MEDIUM},createEmptyButton:Object.assign({paddingHorizontal:f.Y.LARGE,paddingVertical:f.Y.MEDIUM,borderRadius:8,alignItems:"center",minWidth:180,alignSelf:"center"},"web"===h.A.OS&&{cursor:"pointer",userSelect:"none",boxShadow:"0px 2px 4px rgba(0,0,0,0.1)"})})},6721:(e,t,r)=>{r.d(t,{E5:()=>s,VI:()=>n,m5:()=>o});const n="https://zhylhvuhhoialsgqrxxr.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpoeWxodnVoaG9pYWxzZ3FyeHhyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzkxNjM3NTgsImV4cCI6MjA1NDczOTc1OH0.wrZ05wA3EcbBubG3Mrxmx--fA9ThE2_M9k9WYTmGpag",s="159399186219-fagq1jdgjps8q6fq70e9ua8pnmjac7bs.apps.googleusercontent.com"},3295:(e,t,r)=>{r.d(t,{Qq:()=>i,vA:()=>a});var n=r(5991);const o={NODE_ENV:"production",PUBLIC_URL:"",APP_MANIFEST:{name:"FoilQuiver",slug:"FoilQuiver",version:"1.0.0",orientation:"portrait",icon:"./assets/icon.png",userInterfaceStyle:"light",splash:{image:"./assets/splash-icon.png",resizeMode:"contain",backgroundColor:"#ffffff"},web:{},extra:{production:{baseUrl:"https://foilquiver.com"},staging:{baseUrl:"https://staging.foilquiver.com"}},sdkVersion:"52.0.0",platforms:["ios","android","web"]},EXPO_DEBUG:!1,PLATFORM:"web",WDS_SOCKET_PATH:"/_expo/ws"}.EXPO_PUBLIC_ENV||"development",s={development:{apiUrl:"http://localhost:3000",webUrl:"http://localhost:19006",appScheme:"foilquiver-dev"},staging:{apiUrl:"https://api.staging.foilquiver.com",webUrl:"https://staging.foilquiver.com",appScheme:"foilquiver-staging"},production:{apiUrl:"https://api.foilquiver.com",webUrl:"https://foilquiver.com",appScheme:"foilquiver"}},i=()=>s[o],a=()=>{const e=i();return"web"===n.A.OS?[e.webUrl]:[`${e.appScheme}://`]}},2763:(e,t,r)=>{r.d(t,{Dy:()=>o,Op:()=>n,_X:()=>i,lD:()=>a,lU:()=>s,y6:()=>l});const n=16,o=768,s={brand:100,series:120,model:150,area:80,wingspan:80,aspectRatio:80,type:80,price:105,link:80},i=[{id:"brand",label:"Brand",isVisible:!0},{id:"series",label:"Series",isVisible:!1},{id:"model",label:"Model",isVisible:!0},{id:"area",label:"Area",isVisible:!0},{id:"wingspan",label:"Span",isVisible:!0},{id:"aspectRatio",label:"AR",isVisible:!0},{id:"type",label:"Type",isVisible:!0},{id:"price",label:"Price",isVisible:!0},{id:"link",label:"Link",isVisible:!0}],a=e=>e.reduce(((e,t)=>t.isVisible?e+(s[t.id]||100):e),0),l=(e,t,r)=>r?t:Math.min(e,t-48)},5663:(e,t,r)=>{r.d(t,{D:()=>l,n:()=>c});var n=r(6665),o=r(3600),s=r(2763),i=r(397);const a=(0,n.createContext)(void 0),l=({children:e})=>{const[t,r]=(0,n.useState)(""),[l,c]=(0,n.useState)({brands:[],series:[],type:[]}),[d,u]=(0,n.useState)(s._X),[h,m]=(0,n.useState)([]),[p,y]=(0,n.useState)(null);(0,n.useEffect)((()=>{(async()=>{try{const e=await(0,o.Ir)();e&&c({brands:e.brands||[],series:e.series||[],type:e.types||[]});const t=await(0,o.E7)();t&&Array.isArray(t)&&u(t.map((e=>Object.assign({},s._X.find((t=>t.id===e.id)),e))))}catch(e){}})()}),[]),(0,n.useEffect)((()=>{(0,o.ri)({brands:l.brands,series:l.series,types:l.type})}),[l]),(0,n.useEffect)((()=>{p&&c({brands:[],series:[],type:[]})}),[p]);const g={searchQuery:t,setSearchQuery:r,filters:l,setFilters:c,columns:d,setColumns:u,selectedFoils:h,setSelectedFoils:m,currentScreen:p,setCurrentScreen:y};return(0,i.jsx)(a.Provider,{value:g,children:e})},c=()=>{const e=(0,n.useContext)(a);if(void 0===e)throw new Error("useApp must be used within an AppProvider");return e}},2419:(e,t,r)=>{r.d(t,{c:()=>o});var n=r(6665);function o(e,t){const r=(0,n.useMemo)((()=>{const r=Array.from(new Set(e.map((e=>e.brand)))).sort(),n=function(e){return e.reduce(((e,t)=>(e[t.brand]||(e[t.brand]=[]),e[t.brand].push(t),e)),{})}(e);let o=[];if(0===t.brands.length)o=Array.from(new Set(e.map((e=>e.series)))).sort();else{const e=t.brands.flatMap((e=>n[e]||[]));o=Array.from(new Set(e.map((e=>e.series)))).sort()}return{brands:r,series:o,types:["front","tail"]}}),[e,t.brands]);return{filteredFoils:(0,n.useMemo)((()=>e.filter((e=>{const r=0===t.brands.length||t.brands.includes(e.brand),n=0===t.series.length||t.series.includes(e.series),o=0===t.type.length||t.type.includes(e.type);return r&&n&&o}))),[e,t.brands,t.series,t.type]),filterOptions:r}}},209:(e,t,r)=>{r.d(t,{J:()=>a});var n=r(6665),o=r(5991),s=r(1087);class i{static isWeb="web"===o.A.OS;static DATA_PATH="/data/foils.json";static CACHE_DIR=".cache";static getBaseUrl(){return"https://foilquiver.com"}static async getAllProducts(){try{if(this.isWeb){const t=this.getBaseUrl();try{const e=await fetch(`${t}${this.DATA_PATH}`);if(e.ok){return await e.json()}}catch(e){}try{const r=["armstrong","lift-foils","axis-foils","code-foils","kt-foils","uni-foil"],n=[];for(const o of r)try{const e=await fetch(`${t}/${this.CACHE_DIR}/${o}.json`);if(e.ok){const t=await e.json();n.push(...t)}}catch(e){}if(n.length>0)return n}catch(e){}}else{const e=await s.A.getItem("foils");if(e){return JSON.parse(e)}}}catch(e){}return[]}}function a(){const[e,t]=(0,n.useState)([]),[r,o]=(0,n.useState)(!0),[s,a]=(0,n.useState)(null),l=async()=>{try{o(!0),a(null);const e=await i.getAllProducts();t(e)}catch(e){a(e instanceof Error?e.message:"Failed to load foils")}finally{o(!1)}};(0,n.useEffect)((()=>{l()}),[]);return{foils:e,loading:r,error:s,refreshFoils:()=>{l()}}}},4812:(e,t,r)=>{r.d(t,{X:()=>y});var n=r(6665),o=r(1087),s=r(5991),i=r(4635),a=r(382),l=r(5501);const c="@foilquiver/quivers",d=()=>window.location.hostname.includes("staging")?"staging":"prod",u=()=>`${d()}_quivers`,h=async e=>"web"===s.A.OS?localStorage.getItem(e):o.A.getItem(e),m=async(e,t)=>{if("web"!==s.A.OS)return o.A.setItem(e,t);localStorage.setItem(e,t)},p=async e=>{if("web"!==s.A.OS)return o.A.removeItem(e);localStorage.removeItem(e)},y=()=>{const[e,t]=(0,n.useState)([]),[r,o]=(0,n.useState)(!0),[s,y]=(0,n.useState)(null),g=async()=>{try{o(!0),y(null);const{data:{session:e}}=await i.N.auth.getSession();if(e?.user){const{data:r,error:n}=await i.N.from(u()).select("*").eq("environment",d()).eq("user_id",e.user.id).order("updated_at",{ascending:!1});if(n)throw n;t(r||[])}else{const e=await h(c);t(e?JSON.parse(e):[])}}catch(e){y(e instanceof Error?e.message:"Failed to load quivers"),t([])}finally{o(!1)}};return(0,n.useEffect)((()=>{g();const{data:{subscription:e}}=i.N.auth.onAuthStateChange((async e=>{"SIGNED_IN"===e&&await(async()=>{try{const{data:{session:e}}=await i.N.auth.getSession();if(!e?.user)return;const t=await h(c);if(!t)return;const r=JSON.parse(t),n=d();for(const o of r){const t=o.foils.map((e=>(0,a.h)(e))),r={name:o.name,description:o.description||"",foil_ids:t,is_public:o.is_public||!1,user_id:e.user.id,environment:n};await i.N.from(u()).insert([r])}await p(c),await g()}catch(e){}})(),await g()}));return()=>{e.unsubscribe()}}),[]),{quivers:e,isLoading:r,error:s,createQuiver:async r=>{try{y(null);const{data:{session:n}}=await i.N.auth.getSession();if(n?.user){const e=u(),o=d(),s=r.foils.map((e=>(0,a.h)(e))),c={name:r.name,description:r.description||"",user_id:n.user.id,environment:o,foil_ids:s,is_public:r.is_public||!1},{error:h}=await i.N.from(e).insert(c);if(h)throw l.v.error("Insert error:",{message:h.message,details:h.details,hint:h.hint,code:h.code}),h;const{data:m,error:p}=await i.N.from(e).select("*").eq("user_id",n.user.id).eq("name",r.name).order("created_at",{ascending:!1}).limit(1).single();if(p)throw p;if(!m)throw new Error("Failed to retrieve created quiver");const y=Object.assign({},m,{foils:r.foils});return t((e=>[y,...e])),y}{const n=d(),o=r.foils.map((e=>(0,a.h)(e))),s={id:(0,a.l)(),name:r.name,description:r.description||"",foil_ids:o,is_public:r.is_public||!1,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),user_id:"local",environment:n},i=[s,...e];return await m(c,JSON.stringify(i)),t(i),s}}catch(n){throw n}},updateQuiver:async(e,r)=>{y(null);try{const{data:{session:n}}=await i.N.auth.getSession();if(n?.user){const{error:t}=await i.N.from(u()).update(r).eq("id",e);if(t)throw t;return await g(),!0}{const n=await h(c);if(!n)return!1;const o=JSON.parse(n).map((t=>t.id===e?Object.assign({},t,r,{updated_at:(new Date).toISOString()}):t));return await m(c,JSON.stringify(o)),t(o),!0}}catch(s){return y("Failed to update quiver"),!1}},deleteQuiver:async r=>{try{y(null);const{data:{session:n}}=await i.N.auth.getSession();if(n?.user){const{error:e}=await i.N.from(u()).delete().eq("id",r).eq("user_id",n.user.id).eq("environment",d());if(e)throw e}const o=e.filter((e=>e.id!==r));return t(o),n?.user||await m(c,JSON.stringify(o)),!0}catch(n){return y(n instanceof Error?n.message:"Failed to delete quiver"),!1}},reloadQuivers:g}}},4667:(e,t,r)=>{r.d(t,{D:()=>u,N:()=>d});var n=r(6665),o=r(1243),s=r(1087),i=r(5713),a=r(397);const l=(0,n.createContext)(void 0),c="@foilquiver/theme",d=({children:e})=>{const t=(0,o.A)(),[r,d]=(0,n.useState)("dark"===t);(0,n.useEffect)((()=>{(async()=>{try{const e=await s.A.getItem(c);null!==e&&d("dark"===e)}catch(e){}})()}),[]);const u=(0,i.j)(r?"dark":"light");return(0,a.jsx)(l.Provider,{value:{isDark:r,colors:u,toggleTheme:async()=>{try{const e=!r;d(e),await s.A.setItem(c,e?"dark":"light")}catch(e){}}},children:e})},u=()=>{const e=(0,n.useContext)(l);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e}},5713:(e,t,r)=>{r.d(t,{T:()=>h,j:()=>u});const n="#BF3475",o="#FFCE61",s="#F9FAFB",i="#E5E7EB",a="#374151",l="#111827",c={background:{primary:s,secondary:"#F3F4F6",tertiary:i},text:{primary:l,secondary:a,tertiary:"#6B7280",inverse:s},border:i,primary:n,error:"#DC2626",success:"#059669",warning:o},d={background:{primary:l,secondary:"#1F2937",tertiary:a},text:{primary:s,secondary:i,tertiary:"#9CA3AF",inverse:l},border:a,primary:n,error:"#EF4444",success:"#10B981",warning:o},u=e=>"dark"===e?d:c,h=c},2348:(e,t,r)=>{r.d(t,{Y:()=>n});const n={XSMALL:4,SMALL:8,MEDIUM:12,LARGE:16,XLARGE:24,XXLARGE:32,CONTAINER_PADDING:24,BUTTON_PADDING_H:16,BUTTON_PADDING_V:8,BUTTON_GAP:12,CONTROLS_BOTTOM:24,SCREEN_PADDING:24,TABLE_CONTAINER_PADDING:24,HEADER_PADDING:12,CONTENT_PADDING:16,CONTROLS_CONTAINER_BOTTOM:24,CONTROLS_CONTAINER_PADDING:24}},5025:(e,t,r)=>{r.d(t,{R2:()=>a,k4:()=>i,oe:()=>s});var n=r(5991);const o=e=>{"web"===n.A.OS&&window.plausible&&window.plausible(e.name,e.props?{props:e.props}:void 0)},s=(e,t)=>{o({name:"pageview",props:Object.assign({page:e},t)})},i=(e,t)=>{o({name:e,props:t})},a={VIEW_COMPARISON:"view_comparison",VIEW_QUIVER:"view_quiver",COMPARE_FOILS:"compare_foils",SAVE_QUIVER:"save_quiver",DELETE_QUIVER:"delete_quiver",UPDATE_QUIVER:"update_quiver",FILTER_FOILS:"filter_foils",SORT_FOILS:"sort_foils",SEARCH_FOILS:"search_foils"}},382:(e,t,r)=>{r.d(t,{h:()=>n,l:()=>o});const n=e=>`${e.brand.toLowerCase()}-${e.model.toLowerCase().replace(/\s+/g,"-")}`,o=()=>"undefined"!==typeof crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},5501:(e,t,r)=>{r.d(t,{v:()=>o});class n{isDevelopment=!1;constructor(){this.isDevelopment}static getInstance(){return n.instance||(n.instance=new n),n.instance}log(e,t,...r){if(this.isDevelopment||"error"===e){(new Date).toISOString(),e.toUpperCase();e}}debug(e,...t){this.log("debug",e,...t)}info(e,...t){this.log("info",e,...t)}warn(e,...t){this.log("warn",e,...t)}error(e,...t){this.log("error",e,...t)}}const o=n.getInstance()},9659:(e,t,r)=>{r.d(t,{JZ:()=>n});const n={browse:"/",comparison:"/comparison",quiver:"/quiver/:quiverId",terms:"/terms",privacy:"/privacy",contact:"/contact"}},3600:(e,t,r)=>{r.d(t,{E7:()=>c,Ir:()=>a,QZ:()=>u,pC:()=>d,pF:()=>l,ri:()=>i});var n=r(1087),o=r(5501);const s={FILTERS:"@foilquiver/filters",COLUMNS:"@foilquiver/columns",THEME:"@foilquiver/theme",SORT:"@foilquiver/sort"};new class{async set(e,t){try{const r=JSON.stringify(t);await n.A.setItem(e,r)}catch(r){throw o.v.error("Error setting storage item:",r),r}}async get(e){try{const t=await n.A.getItem(e);return null!=t?JSON.parse(t):null}catch(t){throw o.v.error("Error getting storage item:",t),t}}async remove(e){try{await n.A.removeItem(e)}catch(t){throw o.v.error("Error removing storage item:",t),t}}async clear(){try{await n.A.clear()}catch(e){throw o.v.error("Error clearing storage:",e),e}}async getAllKeys(){try{return await n.A.getAllKeys()}catch(e){throw o.v.error("Error getting all storage keys:",e),e}}};const i=async e=>{try{await n.A.setItem(s.FILTERS,JSON.stringify(e))}catch(t){}},a=async()=>{try{const e=await n.A.getItem(s.FILTERS);return e?JSON.parse(e):null}catch(e){return null}},l=async e=>{try{await n.A.setItem(s.COLUMNS,JSON.stringify(e))}catch(t){}},c=async()=>{try{const e=await n.A.getItem(s.COLUMNS);return e?JSON.parse(e):null}catch(e){return null}},d=async e=>{try{await n.A.setItem(s.SORT,JSON.stringify(e))}catch(t){}},u=async()=>{try{const e=await n.A.getItem(s.SORT);return e?JSON.parse(e):null}catch(e){return null}}},4635:(e,t,r)=>{r.d(t,{N:()=>a});var n=r(8336),o=r(5991),s=r(6721),i=r(3295);const a=(0,n.UU)(s.VI,s.m5,{auth:Object.assign({flowType:"pkce",detectSessionInUrl:!0,autoRefreshToken:!0,persistSession:!0,storage:window.localStorage,storageKey:"sb-auth-token"},"web"===o.A.OS&&{redirectTo:(()=>{if("web"!==o.A.OS)return;const{webUrl:e}=(0,i.Qq)(),t=window.location.hostname;return"localhost"===t||t.includes("127.0.0.1")?e:window.location.origin})(),cookieOptions:{name:"sb-auth-token",lifetime:31536e3,domain:window.location.hostname,sameSite:"lax",secure:"https:"===window?.location?.protocol,path:"/",httpOnly:!1}}),global:{headers:{"X-Client-Info":"supabase-js-web"}},realtime:{params:{eventsPerSecond:2}}})}},e=>{e.O(0,[155],(()=>{return t=9166,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=main.4d5df35d.js.map