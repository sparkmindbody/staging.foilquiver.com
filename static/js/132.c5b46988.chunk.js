(self.webpackChunkweb=self.webpackChunkweb||[]).push([[132],{6988:(e,r,t)=>{t.d(r,{Y:()=>n});var n={SMALL:8,MEDIUM:12,LARGE:16,XLARGE:24}},9058:(e,r,t)=>{t.d(r,{A:()=>s});var n=t(296),i=t(6665),o=t(5458);function s(e){var r=(0,i.useState)({field:"area",direction:"asc"}),t=(0,n.A)(r,2),s=t[0],a=t[1],l=(0,i.useMemo)((function(){return r=e,t=s.field,n=s.direction,(0,o.A)(r).sort((function(e,r){var i,o;"brand"===t||"series"===t||"model"===t||"type"===t?(i=e[t].toLowerCase(),o=r[t].toLowerCase()):"price"===t?(i=e.price||0,o=r.price||0):t in e.specs?(i=e.specs[t]||0,o=r.specs[t]||0):(i="",o="");var s="asc"===n?1:-1;return"string"===typeof i&&"string"===typeof o?i.localeCompare(o)*s:"number"===typeof i&&"number"===typeof o?(i-o)*s:0}));var r,t,n}),[e,s]);return{sortOption:s,setSortOption:a,sortedFoils:l}}},597:(e,r,t)=>{t.r(r),t.d(r,{default:()=>k});var n=t(5458),i=t(4467),o=t(296),s=t(6665),a=t(3929),l=t(6283),c=t(3668),u=t(5991),f=t(467),d=t(3029),p=t(2901),b=t(1087),y=(0,p.A)((function e(){(0,d.A)(this,e)}),null,[{key:"getBaseUrl",value:function(){return"https://foilquiver.com"}},{key:"getAllProducts",value:function(){var e=(0,f.A)((function*(){try{if(this.isWeb){var e=this.getBaseUrl();try{var r=yield fetch(`${e}${this.DATA_PATH}`);if(r.ok)return yield r.json()}catch(l){}try{var t=[];for(var i of["armstrong","lift-foils","axis-foils","code-foils","kt-foils","uni-foil"])try{var o=yield fetch(`${e}/${this.CACHE_DIR}/${i}.json`);if(o.ok){var s=yield o.json();t.push.apply(t,(0,n.A)(s))}}catch(l){}if(t.length>0)return t}catch(l){}}else{var a=yield b.A.getItem("foils");if(a)return JSON.parse(a)}}catch(l){}return[]}));return function(){return e.apply(this,arguments)}}()}]);y.isWeb="web"===u.A.OS,y.DATA_PATH="/data/foils.json",y.CACHE_DIR=".cache";var m=t(9058),A=t(4266),h=t(2933),g=t(3391),v=t(6030),S=t(2547),O=t(6239),C=t(9353),w=t(5713),j=t(397);function F(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function x(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?F(Object(t),!0).forEach((function(r){(0,i.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):F(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function k(e){var r,t=e.route,c=(e.navigation,function(){var e=(0,s.useState)([]),r=(0,o.A)(e,2),t=r[0],n=r[1],i=(0,s.useState)(!0),a=(0,o.A)(i,2),l=a[0],c=a[1],u=(0,s.useState)(null),d=(0,o.A)(u,2),p=d[0],b=d[1],m=function(){var e=(0,f.A)((function*(){try{c(!0),b(null);var e=yield y.getAllProducts();n(e)}catch(r){b(r instanceof Error?r.message:"Failed to load foils")}finally{c(!1)}}));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){m()}),[]),{foils:t,loading:l,error:p,refreshFoils:function(){m()}}}()),u=c.foils,d=c.loading,p=c.error,b=(c.refreshFoils,(0,s.useState)(!1)),w=(0,o.A)(b,2),F=w[0],k=w[1],D=function(e){var r=(0,s.useState)({brands:[],series:[],type:null}),t=(0,o.A)(r,2),n=t[0],i=t[1],a=(0,s.useMemo)((function(){var r=Array.from(new Set(e.map((function(e){return e.brand})))),t=(Array.from(new Set(e.map((function(e){return e.series})))),r.reduce((function(r,t){return r[t]=Array.from(new Set(e.filter((function(e){return e.brand===t})).map((function(e){return e.series})))),r}),{})),i=n.type?e.filter((function(e){return e.type===n.type})):e,o=Array.from(new Set(i.map((function(e){return e.series}))));return{brands:r,series:n.brands.length>0?Array.from(new Set(i.filter((function(e){return n.brands.includes(e.brand)})).map((function(e){return e.series})))):o,types:["front","tail"],brandSeries:t}}),[e,n.brands,n.type]),l=(0,s.useMemo)((function(){return e.filter((function(e){var r=0===n.brands.length||n.brands.includes(e.brand),t=0===n.series.length||n.series.includes(e.series),i=!n.type||e.type===n.type;return r&&t&&i}))}),[e,n]);return{filters:n,setFilters:i,filteredFoils:l,filterOptions:a}}(u),E=D.filters,L=D.setFilters,M=D.filteredFoils,T=D.filterOptions,$=function(e,r){return{searchedFoils:(0,s.useMemo)((function(){if(!r.trim())return e;var t=r.toLowerCase().trim();return e.filter((function(e){return[e.brand,e.model,e.series,e.specs.area.toString(),e.specs.wingspan.toString(),e.specs.aspectRatio.toString()].some((function(e){return e.toLowerCase().includes(t)}))}))}),[e,r])}}(M,(null==(r=t.params)?void 0:r.searchQuery)||""),W=$.searchedFoils,B=(0,m.A)(W),H=B.sortOption,I=B.setSortOption,R=B.sortedFoils,U=function(){var e=(0,s.useState)([]),r=(0,o.A)(e,2),t=r[0],i=r[1],a=(0,s.useCallback)((function(e){i((function(r){return r.some((function(r){return r.model===e.model&&r.brand===e.brand}))?r.filter((function(r){return!(r.model===e.model&&r.brand===e.brand)})):[].concat((0,n.A)(r),[e])}))}),[]),l=(0,s.useCallback)((function(e){return t.some((function(r){return r.model===e.model&&r.brand===e.brand}))}),[t]),c=(0,s.useCallback)((function(){i([])}),[]);return{selectedFoils:t,toggleFoilSelection:a,isSelected:l,clearSelection:c}}(),_=U.selectedFoils,q=U.toggleFoilSelection,G=U.isSelected,Q=U.clearSelection,J=function(){k(!1)};return d?(0,j.jsx)(O.I,{}):p?(0,j.jsx)(l.A,{style:P.error,children:p}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(C.a,{title:"FoilQuiver - Browse and compare hydrofoils",description:`Compare ${u.length} hydrofoils across ${T.brands.length} brands. Filter by type, brand, and specifications to find your perfect foil.`,canonicalUrl:"https://foilquiver.com/browse"}),(0,j.jsxs)(a.A,{style:[P.container,P.containerWeb],children:[(0,j.jsx)(A.B,{filterOptions:{brands:T.brands,series:T.series,types:["front","tail"]},selectedBrands:E.brands,selectedSeries:E.series,selectedTypes:E.type?[E.type]:[],onFilterChange:function(e,r){L((function(t){if("type"===e){var o=r;return x(x({},t),{},{type:t.type===o?null:o})}var s=t[e];return x(x({},t),{},(0,i.A)({},e,s.includes(r)?s.filter((function(e){return e!==r})):[].concat((0,n.A)(s),[r])))}))}}),(0,j.jsx)(a.A,{style:[P.tableContainer,P.tableContainerWeb],children:F?(0,j.jsx)(v.A,{foils:_,onClose:J,onCompare:function(){}}):(0,j.jsx)(h.o,{foils:R,onSort:function(e){I((function(r){return{field:e,direction:r.field===e&&"asc"===r.direction?"desc":"asc"}}))},onFoilSelect:q,isSelected:G,sortOption:{field:H.field,ascending:"asc"===H.direction}})}),(0,j.jsx)(g.A,{selectedFoils:_,onCompareSelected:function(){k(!0)},onExitCompare:J,onClearSelection:Q,isComparisonView:F}),(0,j.jsx)(S.A,{})]})]})}var P=c.A.create({container:{flex:1,backgroundColor:w.T.background.primary},containerWeb:"web"===u.A.OS?{minHeight:"100%",display:"flex",flexDirection:"column"}:{},tableContainer:{flex:1,backgroundColor:w.T.background.primary},tableContainerWeb:"web"===u.A.OS?{overflow:"scroll"}:{},error:{color:"red",padding:16,textAlign:"center"}})}}]);
//# sourceMappingURL=132.c5b46988.chunk.js.map